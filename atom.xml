<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Dark Angel</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://blog.darkangel7.com/"/>
  <updated>2017-05-05T09:24:15.000Z</updated>
  <id>http://blog.darkangel7.com/</id>
  
  <author>
    <name>Dark Angel</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>iOSä¸­NSUserDefaultsçš„é»‘ç§‘æŠ€</title>
    <link href="http://blog.darkangel7.com/2017/05/05/iOS%E4%B8%ADNSUserDefaults%E7%9A%84%E9%BB%91%E7%A7%91%E6%8A%80/"/>
    <id>http://blog.darkangel7.com/2017/05/05/iOSä¸­NSUserDefaultsçš„é»‘ç§‘æŠ€/</id>
    <published>2017-05-05T04:18:12.000Z</published>
    <updated>2017-05-05T09:24:15.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>åœ¨iOSå¼€å‘ä¸­ï¼Œæˆ‘ä»¬æ—¶å¸¸éœ€è¦ä¿å­˜ä¸€äº›æ•°æ®ï¼Œæˆ–è€…å¸Œæœ›åœ¨ç”¨æˆ·ä¸‹æ¬¡æ‰“å¼€Appæ—¶ï¼Œä¾ç„¶å¯ä»¥ä¿ç•™ä¸€äº›è®¾ç½®ç­‰ï¼Œæ¯”å¦‚<strong>ä¸»é¢˜è®¾ç½®</strong>ã€<strong>è¯­è¨€è®¾ç½®</strong>ï¼Œé‚£ä¹ˆæˆ‘ä»¬ä¸€èˆ¬ä¼šé€‰æ‹©ä½¿ç”¨<code>NSUserDefaults</code>ä½œä¸ºè½»é‡çº§æ•°æ®æŒä¹…åŒ–æ–¹æ¡ˆã€‚è¿™é‡Œä¸å¯¹å…¶ä»–çš„æ•°æ®æŒä¹…åŒ–æ–¹æ¡ˆï¼ˆå¦‚Plistã€å½’æ¡£ã€Sqlite3ã€CoreDataç­‰ï¼‰è¿›è¡Œæ¢è®¨ï¼Œä¸»è¦æ¥ä»‹ç»ä¸€ä¸‹<code>NSUserDefaults</code>ä¸­çš„ä¸€äº›é»‘ç§‘æŠ€ã€‚</p>
<h1 id="NSUserDefaultsç®€ä»‹"><a href="#NSUserDefaultsç®€ä»‹" class="headerlink" title="NSUserDefaultsç®€ä»‹"></a>NSUserDefaultsç®€ä»‹</h1><p><code>NSUserDefaults</code>åœ¨Foundationæ¡†æ¶ä¸­è¢«å®šä¹‰ï¼Œç”¨æ¥å­˜å‚¨å’Œè¯»å–ä¸€äº›è½»é‡çº§æ•°æ®ã€‚å…¶æœ¬è´¨æ˜¯æ“ä½œplistæ–‡ä»¶ã€‚</p>
<p>å®ƒæ¯”å…¶ä»–æ•°æ®æŒä¹…åŒ–æ–¹æ¡ˆçš„ä¼˜ç‚¹åœ¨äºï¼š</p>
<ul>
<li>è½»é‡çº§ã€‚</li>
<li>æ–¹ä¾¿å¿«æ·ç›´æ¥ä½¿ç”¨ã€‚</li>
<li>æ”¯æŒ<code>NSData</code>, <code>NSString</code>, <code>NSNumber</code>, <code>NSDate</code>, <code>NSArray</code> and  <code>NSDictionary</code>ã€‚</li>
</ul>
<p>ç¼ºç‚¹åœ¨äºï¼š</p>
<ul>
<li>ä¸é€‚åˆå¤§é‡æ•°æ®ã€‚</li>
<li>æ— æ³•å­˜å‚¨è‡ªå®šä¹‰<code>model</code>ã€‚</li>
</ul>
<h1 id="é»‘ç§‘æŠ€"><a href="#é»‘ç§‘æŠ€" class="headerlink" title="é»‘ç§‘æŠ€"></a>é»‘ç§‘æŠ€</h1><p>ä¸€äº›<code>NSUserDefaults</code>æœ€åŸºç¡€çš„ç”¨æ³•ï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°äº†ã€‚è¯´åˆ°é»‘ç§‘æŠ€ï¼Œä¸€èˆ¬æŒ‡çš„æ˜¯é²œä¸ºäººçŸ¥è€Œåˆååˆ†å‰å®³çš„æŠ€æœ¯ã€‚è¿™é‡Œä¸»è¦ä»‹ç»ä¸¤ä¸ªé»‘ç§‘æŠ€ã€‚</p>
<h2 id="è¿˜åŸé»˜è®¤å€¼"><a href="#è¿˜åŸé»˜è®¤å€¼" class="headerlink" title="è¿˜åŸé»˜è®¤å€¼"></a>è¿˜åŸé»˜è®¤å€¼</h2><p>ä¸€èˆ¬<code>NSUserDefaults</code>ä½¿ç”¨ï¼Œéƒ½ä¼šä¿å­˜ä¸€äº›è‡ªå®šä¹‰çš„Keyå’ŒValueï¼Œå…¶å®è¿™ä¸ªä¸æ¶‰åŠè¿˜åŸé»˜è®¤å€¼çš„é—®é¢˜ã€‚å…¶å®æœ‰äº›æ—¶å€™ï¼Œæ˜¯éœ€è¦ä¿®æ”¹å…¶ä¸­çš„ç³»ç»Ÿé»˜è®¤å€¼çš„ã€‚æ¯”å¦‚åº”ç”¨å†…åˆ‡æ¢ä¸­è‹±æ–‡ï¼Œå°±éœ€è¦ä¿®æ”¹<code>AppleLanguages</code>çš„valueã€‚æ—¢ç„¶ä¿®æ”¹äº†ç³»ç»Ÿé»˜è®¤å€¼ï¼Œæ€ä¹ˆè¿˜åŸé»˜è®¤å€¼å‘¢ï¼Ÿ</p>
<p>æˆ‘ä»¬å…ˆæ¥çœ‹ä¸€ä¸‹ä¿®æ”¹å‰çš„ï¼š</p>
<pre><code>po [NSUserDefaults standardUserDefaults].dictionaryRepresentation

{
    ...
    AppleLanguages =     (
        en,
        &quot;zh-Hans-US&quot;
    );
    AppleLocale = &quot;en_US&quot;;
    ...
}
</code></pre><p>å¯ä»¥çœ‹åˆ°<code>AppleLanguages</code>å¯¹åº”çš„æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå¦‚æœæˆ‘ä»¬åœ¨Appå†…æƒ³åˆ‡æ¢æˆä¸­æ–‡ï¼Œæ‰§è¡Œ</p>
<pre><code class="objective-c">[[NSUserDefaults standardUserDefaults] setObject:@[@&quot;zh-Hans&quot;] forKey:@&quot;AppleLanguages&quot;];
</code></pre>
<p>å†æ¬¡çœ‹ä¸‹ä¿®æ”¹å</p>
<pre><code>po [NSUserDefaults standardUserDefaults].dictionaryRepresentation

{
    ...
    AppleLanguages =     (
        zh-Hans
    );
    AppleLocale = &quot;en_US&quot;;
    ...
}
</code></pre><p>å¥½å§ï¼Œè¿™ä¸ª<code>AppleLanguages</code>å­—æ®µçš„å€¼å·²ç»è¢«è®°å½•äº†ã€‚è¿™æ—¶å€™ï¼Œkillå®¢æˆ·ç«¯ï¼Œé‡æ–°æ‰“å¼€å®¢æˆ·ç«¯ï¼Œå‘ç°ï¼Œè¿™ä¸ªå€¼è‚¯å®šä¸ä¼šå˜ã€‚é‚£ä¹ˆå¦‚æœè¿™ä¸ªæ—¶å€™ç”¨æˆ·åœ¨ç³»ç»Ÿè®¾ç½®ä¸­åˆ‡æ¢åˆ°äº†æ—¥è¯­ï¼Œé‚£ä¹ˆæˆ‘æƒ³åœ¨å®¢æˆ·ç«¯ä¸­é€šè¿‡<strong>è·Ÿéšæ‰‹æœºç³»ç»Ÿ</strong>çš„è®¾ç½®ï¼Œè¿˜åŸåˆ°æ—¥è¯­ï¼Œè¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿ</p>
<p>æˆ–è®¸ä½ ä¼šæƒ³åˆ°è®°å½•åˆå§‹å€¼ï¼Œåªè¦æå‰è®°å½•ï¼Œåœ¨è¿˜åŸæ—¶å†setå›å»å°±å¯ä»¥äº†ã€‚å—¯~æ²¡æ¯›ç—…ï¼Œå¯æ˜¯åœ¨ä»€ä¹ˆåœ°æ–¹ä»€ä¹ˆæ—¶å€™è®°å½•åˆå§‹å€¼å‘¢ï¼Ÿè¿™ä¸ª<code>AppleLanguages</code>å­—æ®µå…¶å®å°±æ˜¯ç³»ç»Ÿçš„è¯­è¨€é»˜è®¤å€¼ï¼Œä½ å·²ç»æŠŠå®ƒæ”¹è¿‡äº†ï¼Œå¦‚æœåœ¨ä½ æ”¹è¿‡ä¹‹åç”¨æˆ·åˆä¿®æ”¹äº†ç³»ç»Ÿè¯­è¨€ï¼Œé‚£ä½ æ˜¯æ‹¿ä¸åˆ°æ–°é»˜è®¤å€¼çš„ï¼Œæ‰€ä»¥è¿™æ¡è·¯æ˜¯èµ°ä¸é€šçš„ã€‚</p>
<p>é‚£æ€ä¹ˆå®ç°è¿˜åŸé»˜è®¤å€¼å‘¢ï¼Ÿçœ‹ä¸‹è¿™ä¸ªæ–¹æ³•ï¼š</p>
<pre><code>/*!
 -setObject:forKey: immediately stores a value (or removes the value if nil is passed as the value) for the provided key in the search list entry for the receiver&#39;s suite name in the current user and any host, then asynchronously stores the value persistently, where it is made available to other processes.
 */
- (void)setObject:(nullable id)value forKey:(NSString *)defaultName;
</code></pre><p>è¿™ä¸ªæ–¹æ³•Documentä¸­å¹¶æ²¡æœ‰æè¿°è¿‡å¤šï¼ŒåŸºæœ¬éƒ½æ˜¯åœ¨å¼ºè°ƒ<code>value</code>å¿…é¡»æ˜¯<code>NSData</code>, <code>NSString</code>, <code>NSNumber</code>, <code>NSDate</code>, <code>NSArray</code> and  <code>NSDictionary</code>ä¸­çš„ä¸€ç§ï¼Œä¸”<code>NSArray</code> and  <code>NSDictionary</code>ä¸­çš„å€¼ä¹Ÿå¿…é¡»æ˜¯Plistæ”¯æŒçš„ç±»å‹ã€‚åœ¨æ³¨é‡Šä¸­æœ‰å¼ºè°ƒï¼Œ<code>removes the value if nil is passed as the value</code>ï¼Œä¼ nilç­‰åŒäºåˆ é™¤è¿™ä¸ªé”®å€¼å¯¹ã€‚</p>
<pre><code>/// -removeObjectForKey: is equivalent to -[... setObject:nil forKey:defaultName]
- (void)removeObjectForKey:(NSString *)defaultName;
</code></pre><p>å…¶å®è¿™é‡Œæ‰æ˜¯å…³é”®</p>
<pre><code>[[NSUserDefaults standardUserDefaults] setObject:nil forKey:@&quot;AppleLanguages&quot;];
//or
[[NSUserDefaults standardUserDefaults] removeObjectForKey:@&quot;AppleLanguages&quot;];
</code></pre><p>ç„¶åå†æ¬¡</p>
<pre><code>po [NSUserDefaults standardUserDefaults].dictionaryRepresentation

{
    ...
    AppleLanguages =     (
        en,
        &quot;zh-Hans-US&quot;
    );
    AppleLocale = &quot;en_US&quot;;
    ...
}
</code></pre><p>ä½ ä¼šå‘ç°ï¼ŒWTFï¼Œå±…ç„¶è¿™ä¸ªå­—æ®µè¿˜å­˜åœ¨ï¼Œä¸”è¿˜åŸæˆäº†é»˜è®¤å€¼ï¼Œå‰å®³äº†wordå“¥ã€‚æœ¬æ–¹æ³•æ˜¯æœ¬äººå†ç»å„ç§å‘ä¹‹åå‘ç°çš„ï¼Œä¸”å®˜æ–¹æ–‡æ¡£ä¸­æ²¡æœ‰ä»»ä½•æåŠï¼Œåªèƒ½è¯´Appleçˆ¸çˆ¸ä»»æ€§ã€‚</p>
<h2 id="å·§ç”¨SuiteName"><a href="#å·§ç”¨SuiteName" class="headerlink" title="å·§ç”¨SuiteName"></a>å·§ç”¨SuiteName</h2><pre><code>- (nullable instancetype)initWithSuiteName:(nullable NSString *)suitename NS_AVAILABLE(10_9, 7_0) NS_DESIGNATED_INITIALIZER;
</code></pre><p>è¿™ä¸ªæ–¹æ³•ï¼Œæƒ³å¿…å„ä½ä¸ä¼šé™Œç”Ÿï¼Œåœ¨è·¨Appé—´é€šä¿¡æˆ–è€…ä¸»Appä¸Extensionå…±äº«æ•°æ®ï¼Œéƒ½ä¼šç”¨åˆ°ï¼Œä¸€èˆ¬é…åˆä½¿ç”¨çš„æ˜¯<strong>App Groups</strong>ã€‚</p>
<h3 id="App-Groupsæ•°æ®å…±äº«"><a href="#App-Groupsæ•°æ®å…±äº«" class="headerlink" title="App Groupsæ•°æ®å…±äº«"></a>App Groupsæ•°æ®å…±äº«</h3><p>åœ¨App Groupsä¸­ä½¿ç”¨ï¼Œä¸€èˆ¬ä¸¤ä¸ªAppéƒ½éœ€è¦åŠ å…¥åŒä¸€ä¸ªGroupã€‚<img src="http://ww1.sinaimg.cn/large/006tNbRwly1ffajfof2qdj30x00cqjsl.jpg" alt="">ç„¶ååœ¨ä¸¤ä¸ªAppåˆ†åˆ«ä½¿ç”¨</p>
<pre><code class="objective-c">- (NSUserDefaults *)userDefaults
{
    return [[NSUserDefaults alloc] initWithSuiteName:@&quot;group.urwork.autosignin&quot;];    //nameéœ€è¦æ˜¯Groupçš„id
}
</code></pre>
<p>æ¥å­˜å‚¨å’Œè¯»å–æ•°æ®ï¼Œå³å¯å®ç°æ•°æ®å…±äº«ã€‚</p>
<h3 id="è¶…å¾®å‹ç®€å•æ–¹ä¾¿æ˜“ç”¨æ•°æ®åº“"><a href="#è¶…å¾®å‹ç®€å•æ–¹ä¾¿æ˜“ç”¨æ•°æ®åº“" class="headerlink" title="è¶…å¾®å‹ç®€å•æ–¹ä¾¿æ˜“ç”¨æ•°æ®åº“"></a>è¶…å¾®å‹ç®€å•æ–¹ä¾¿æ˜“ç”¨æ•°æ®åº“</h3><p>è¿™é‡Œï¼Œå…¶å®ä¸»è¦ä»‹ç»ä¸€ä¸‹<code>initWithSuiteName:</code>çš„å¦ä¸€ä¸ªç”¨é€”ï¼Œæˆ‘ç§°ä¹‹ä¸º<strong>è¶…å¾®å‹ç®€å•æ–¹ä¾¿æ˜“ç”¨æ•°æ®åº“</strong>ã€‚</p>
<p><strong>éœ€æ±‚</strong>ï¼šåå°åŒå­¦æœ€è¿‘å¤ªå¿™ï¼ˆğŸ˜³è¿™ä¸æ˜¯ç†ç”±ï¼‰ï¼Œéœ€è¦å®¢æˆ·ç«¯åŒå­¦ä¸´æ—¶å¼€å‘ä¸€ä¸ªæœ¬åœ°çš„æµè§ˆå†å²åŠŸèƒ½ã€‚ç®€å•çš„è¯´å°±æ˜¯åœ¨å®¢æˆ·ç«¯æœ¬åœ°ä¿å­˜æ¯ä¸ªç”¨æˆ·æµè§ˆçš„æ–‡ç« è®°å½•ã€‚</p>
<p><strong>åç³Ÿ</strong>ï¼šå¥½å§ï¼Œæ—¶é—´ç´§ï¼Œä»»åŠ¡é‡ï¼ŒåŠŸèƒ½å…ˆä¸Šçº¿ï¼Œåç»­å†ä¼˜åŒ–å·²ç»æ˜¯ä¸€ä¸ªä¹ æƒ¯äº†ğŸ˜³ã€‚</p>
<p><strong>å®ç°æ–¹æ¡ˆ</strong>ï¼šç®€å•ï¼Œæœ¬åœ°å­˜ä¸ªå­—å…¸ï¼ˆæˆ–è€…Plistæ–‡ä»¶ï¼‰ï¼Œæ¯ä¸ªkeyæ˜¯ä¸€ä¸ªç”¨æˆ·idï¼Œvalueæ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„é‡Œçš„æ¯ä¸ªå…ƒç´ æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œè¿™ä¸ªå­—å…¸é‡Œæœ‰<code>articleId</code>ã€<code>title</code>ã€<code>imgUrl</code>ã€<code>...</code>ã€‚ç»“æ„å¤§æ¦‚æ˜¯è¿™æ ·ï¼š</p>
<pre><code>{
  &quot;10086&quot; : [
    {
      &quot;articleId&quot; : 1,
      &quot;imgUrl&quot; : &quot;https://img.xxx.com/abcdefg.png&quot;,
      &quot;title&quot; : &quot;ä¸­å›½å†å²&quot;,
      ...
    },
    {
      &quot;articleId&quot; : 2,
      &quot;imgUrl&quot; : &quot;https://img.xxx.com/abcdefg.png&quot;,
      &quot;title&quot; : &quot;ä¸­å›½æ•™è‚²&quot;,
      ...
    },
    ...
  ],
  &quot;10087&quot; : [
    {
      &quot;articleId&quot; : 2,
      &quot;imgUrl&quot; : &quot;https://img.xxx.com/abcdefg.png&quot;,
      &quot;title&quot; : &quot;ä¸­å›½æ•™è‚²&quot;,
      ...
    },
    ...
  ]
}
</code></pre><p>çœ‹èµ·æ¥OKï¼Œä½†æ˜¯å°ä¼™ä¼´ä»¬ï¼Œæ€§èƒ½é—®é¢˜è¿˜æ˜¯è¦è€ƒè™‘çš„ã€‚æˆ‘æƒ³è·å–æŸä¸ªç”¨æˆ·çš„æµè§ˆå†å²ï¼Œéœ€è¦æŠŠæ–‡ä»¶æ•´ä½“è¯»åˆ°å†…å­˜ä¸­ï¼Œç„¶åç”¨<code>dict[@&quot;10086&quot;]</code>çš„æ–¹æ³•ï¼Œå¾—åˆ°è¿™ä¸ªç”¨æˆ·çš„æµè§ˆå†å²<code>Array</code>ï¼Œç”¨æˆ·å°‘è¿˜å¥½ï¼Œå¤šäº†ï¼Œæ¯æ¬¡è¯»å–çš„IOæ“ä½œä¼šå¾ˆè€—æ—¶ï¼Œå¯¹æ€§èƒ½æœ‰å½±å“ã€‚</p>
<p>å¯èƒ½ä½ ä¼šè¯´ç”¨æ•°æ®åº“å•Šä»€ä¹ˆçš„ï¼Œå½“ç„¶å¯ä»¥ï¼Œä½†æ˜¯åˆæ˜¯éœ€è¦ä¾èµ–ä¸€å †ç¬¬ä¸‰æ–¹ï¼Œè¿˜è¦å†™å¥½å¤šä»£ç ï¼Œåˆ›å»ºå¥½å¤šç±»ã€‚æˆ‘å°±æ˜¯æƒ³ç®€å•å®ç°ä¸€ä¸‹ï¼Œæœ‰æ²¡æœ‰æ›´å¥½çš„æ–¹æ³•å‘¢ï¼Ÿå½“ç„¶æœ‰ï¼Œ<strong>è¶…å¾®å‹ç®€å•æ–¹ä¾¿æ˜“ç”¨æ•°æ®åº“</strong>ã€‚</p>
<p>æ¯ä¸ªç”¨æˆ·éƒ½å¯ä»¥ç”¨ä¸€ä¸ª<code>NSUserDefaults</code>æ¥ä»£æ›¿ï¼Œæ¯ä¸ªç”¨æˆ·çš„æµè§ˆå†å²ï¼Œå¯ä»¥ç›´æ¥ç”¨<code>setObject:forKey:</code>çš„æ–¹å¼æ¥å­˜å‚¨ï¼Œå¦‚ï¼š</p>
<pre><code class="objective-c">//è¿™ä¸ªè·ŸApp Groupsæ²¡æœ‰å…³ç³»
//å·²æœ‰åˆ™è¯»å–ï¼Œæ²¡æœ‰åˆ™åˆ›å»º
NSUserDefaults *userDefaults = [[NSUserDefaults alloc] initWithSuiteName:@&quot;10086&quot;];
//å­˜å‚¨
[userDefaults setObject:history forKey:@&quot;ArticleBrowsingHistory&quot;];
//è¯»å–
NSArray *history = [userDefaults objectForKey:@&quot;ArticleBrowsingHistory&quot;];
</code></pre>
<p>æ‰€æœ‰ç”¨æˆ·ç›¸å¯¹ç‹¬ç«‹ï¼Œæ¯ä¸ªç”¨æˆ·æ˜¯ä¸€ä¸ªplistæ–‡ä»¶ï¼Œåœ¨æ²™ç›’ç›®å½•<code>/Library/Preferences/</code>ä¸­ï¼Œ<img src="http://ww2.sinaimg.cn/large/006tNbRwly1ffalfnmhudj30z007kab7.jpg" alt="">æƒ³åˆ é™¤ä¹Ÿå¾ˆå®¹æ˜“ï¼Œç›´æ¥åˆ é™¤è¿™ä¸ªæ–‡ä»¶å³å¯ã€‚</p>
<p>å…¶å®è¿™ä¸ª<strong>è¶…å¾®å‹ç®€å•æ–¹ä¾¿æ˜“ç”¨æ•°æ®åº“</strong>è¿˜å¯ä»¥å®ç°å¥½å¤šåŠŸèƒ½ï¼Œçœ‹ä½ æ€ä¹ˆæ“ä½œäº†ã€‚å¦‚æœä½ çš„Appæ²¡æœ‰åå°ï¼Œä¸åŒç”¨æˆ·çš„ä¸»é¢˜è®¾ç½®ã€è¯­è¨€è®¾ç½®å¯èƒ½ä¸åŒï¼Œéƒ½å¯ä»¥é€šè¿‡è¿™ä¸ªæ¥å­˜å‚¨ã€‚</p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>å…¶å®å¾ˆå¤šæˆ‘ä»¬å¾ˆå¸¸ç”¨çš„ä¸œè¥¿éƒ½æœ‰å¾ˆå¤šæˆ‘ä»¬æœªå‘æ˜å‡ºçš„ç”¨é€”ï¼Œç”Ÿæ´»ä¹Ÿæ˜¯åŒæ ·ï¼Œå­¦ä¼šå‘ç°ï¼Œä¸€åˆ‡ä¼šæ›´ç¾å¥½ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;åœ¨iOSå¼€å‘ä¸­ï¼Œæˆ‘ä»¬æ—¶å¸¸éœ€è¦ä¿å­˜ä¸€äº›æ•°æ®ï¼Œæˆ–è€…å¸Œæœ›åœ¨ç”¨æˆ·ä¸‹æ¬¡æ‰“å¼€Appæ—¶ï¼Œä¾ç„¶å¯ä»¥ä¿ç•™ä¸€äº›è®¾ç½®ç­‰ï¼Œæ¯”å¦‚&lt;strong&gt;ä¸»é¢˜è®¾ç½®&lt;/stron
    
    </summary>
    
    
      <category term="iOSæŠ€æœ¯åˆ†äº«" scheme="http://blog.darkangel7.com/tags/iOS%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
  </entry>
  
  <entry>
    <title>åœ¨iOS Appå†…ä¼˜é›…çš„åŠ¨æ€åˆ‡æ¢è¯­è¨€</title>
    <link href="http://blog.darkangel7.com/2017/05/04/%E5%9C%A8iOSApp%E5%86%85%E4%BC%98%E9%9B%85%E7%9A%84%E5%8A%A8%E6%80%81%E5%88%87%E6%8D%A2%E8%AF%AD%E8%A8%80/"/>
    <id>http://blog.darkangel7.com/2017/05/04/åœ¨iOSAppå†…ä¼˜é›…çš„åŠ¨æ€åˆ‡æ¢è¯­è¨€/</id>
    <published>2017-05-04T03:46:56.000Z</published>
    <updated>2017-05-05T09:28:31.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h1><p>éšç€å…¬å¸ä¸šåŠ¡çš„å‘å±•ï¼ŒAppç‰ˆæœ¬çš„è¿­ä»£ï¼Œç›¸ä¿¡ä¸å°‘Appéƒ½éœ€è¦è‹±æ–‡åŒ–ï¼ˆå›½é™…åŒ–ï¼‰ã€‚Appè‹±æ–‡åŒ–ï¼Œä¸å¤–ä¹è¿™ä¸‰ç‚¹ï¼š</p>
<ol>
<li>çº¯ä»£ç ä¸­å¼•ç”¨çš„stringså›½é™…åŒ–ï¼›</li>
<li>Storyboard/Xibå›½é™…åŒ–ï¼›</li>
<li>Info.plistå›½é™…åŒ–ã€‚</li>
</ol>
<p>å…·ä½“è¿™ä¸‰ç§åˆ†åˆ«å¦‚ä½•æ“ä½œï¼Œæ€ä¹ˆå›½é™…åŒ–ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚ä¸€èˆ¬Appåšäº†å›½é™…åŒ–ï¼Œé‚£ä¹ˆåœ¨ç”¨æˆ·åˆ‡æ¢æ‰‹æœºç³»ç»ŸSettingsé‡Œçš„Languageæ—¶ï¼ŒAppå°±ä¼šåˆ‡æ¢æˆå¯¹åº”çš„è¯­è¨€ï¼ˆå‰ææ˜¯åšè¿‡è¯¥è¯­è¨€å›½é™…åŒ–ï¼‰ã€‚é‚£ä¹ˆå¦‚æœæƒ³å®ç°<strong>å¾®åš</strong>å’Œ<strong>å¾®ä¿¡</strong>ç­‰Appï¼Œåœ¨Appå†…éƒ¨å®ç°åˆ‡æ¢è¯­è¨€ï¼Œåº”è¯¥æ€ä¹ˆåšå‘¢ï¼Ÿå¦‚ä½•åšï¼Œæ‰èƒ½æ›´åŠ ä¼˜é›…çš„åŠ¨æ€åˆ‡æ¢è¯­è¨€å‘¢ï¼Ÿ</p>
<p>ä¸‹é¢ï¼Œè®²ä¸€è®²å¦‚ä½•åœ¨iOS Appå†…ä¼˜é›…çš„åŠ¨æ€åˆ‡æ¢è¯­è¨€ã€‚</p>
<h1 id="è°ƒç ”"><a href="#è°ƒç ”" class="headerlink" title="è°ƒç ”"></a>è°ƒç ”</h1><p>å¦‚æœæœ‰ç›¸å…³éœ€æ±‚ï¼Œä¸€èˆ¬æˆç†Ÿçš„Appéƒ½ä¼šæ€ä¹ˆåšå‘¢ï¼Ÿè¿™é‡Œæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹<strong>å¾®åš</strong>å’Œ<strong>å¾®ä¿¡</strong>ã€‚</p>
<p><strong>å¾®åš</strong>ï¼š</p>
<p><img src="http://ww3.sinaimg.cn/large/006tKfTcly1ff9jfo5a8ig306y0cctz0.gif" alt=""></p>
<p><strong>å¾®ä¿¡</strong>ï¼š</p>
<p><img src="http://ww1.sinaimg.cn/large/006tKfTcly1ff9d5ezj9jg30680b3kif.gif" alt=""></p>
<p>å¯¹æ¯”ä¸€ä¸‹å¯ä»¥çœ‹å‡ºï¼Œå¾®åšæ•´ä½“çš„æ•ˆæœæ¯”å¾®ä¿¡å¥½å¾ˆå¤šï¼Œä¸æ»‘æµç•…ã€‚</p>
<p><strong><em>è¿™é‡Œæ³¨æ„ä¸€ä¸‹ç»†èŠ‚</em></strong>ï¼šæˆ‘åœ¨å¾®åšçš„ä¸ªäººä¸­å¿ƒæ˜¯æ•…æ„ä¸Šæ»‘äº†ä¸€ä¸‹ï¼Œç„¶åç‚¹å‡»è¿›å…¥è®¾ç½®ï¼Œè¿›è¡Œè¯­è¨€åˆ‡æ¢ï¼Œå¯ä»¥çœ‹åˆ°åˆ‡æ¢æ—¶å¾ˆè‡ªç„¶ï¼Œç„¶åè¿”å›ä¸ªäººä¸­å¿ƒæ—¶ï¼Œé¡µé¢<code>scrollView</code>çš„<code>contentOffset</code>å¹¶æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œç”±æ­¤å¯ä»¥æ¨æµ‹ï¼š</p>
<p><strong><u>å¾®åšçš„æ€è·¯æ˜¯ï¼Œåœ¨åˆ‡æ¢è¯­è¨€æ—¶ï¼Œå‘é€é€šçŸ¥<code>NSNotification</code>ï¼Œæ‰€æœ‰çš„UIæ§ä»¶ç›‘å¬é€šçŸ¥ï¼Œç„¶ååœ¨é€‚å½“çš„æ—¶å€™åˆ·æ–°UI</u></strong>ã€‚é‚£ä¹ˆå…¶å®è¿™ä¹ˆå†™ï¼Œéœ€è¦åšçš„ä¸œè¥¿å¾ˆå¤šï¼Œæˆ–æ˜¯é€šè¿‡Baseç±»æ¥å®ç°ï¼Œæˆ–æ˜¯é€šè¿‡<code>runtime</code>å®ç°ï¼Œæ€»ä¹‹<code>Button</code>ã€<code>Label</code>ã€<code>TextField</code>ç­‰ç­‰éƒ½éœ€è¦æœ‰ä¸€å¥—ç»Ÿä¸€çš„æ›´æ–°æœºåˆ¶ï¼Œå¯èƒ½ä¸æ˜¯ä¸€ä¸ªæœ€ç®€å•çš„åŠæ³•ã€‚</p>
<p><strong><u>è€Œå¾®ä¿¡åˆ‡æ¢çš„æ–¹æ¡ˆæ˜¯ï¼Œåˆ·æ–°<code>keyWindow</code>çš„<code>rootViewController</code>ï¼Œç„¶åè·³è½¬åˆ°è®¾ç½®é¡µï¼Œæ‰€ä»¥ä½ ä¼šçœ‹åˆ°åˆ‡æ¢è¯­è¨€çš„ä¸€ç¬é—´ç•Œé¢å‡ºç°åŒªå¤·æ‰€æ€çš„bugï¼Œå¦‚ä¸‹å›¾</u></strong></p>
<p><img src="http://ww1.sinaimg.cn/large/006tKfTcly1ff9iduf60aj306y0cbjrm.jpg" alt=""></p>
<p>å…¶å®å¾®ä¿¡çš„æ–¹æ¡ˆæ˜¯ä¸ªæœ€ç®€å•çš„æ–¹æ¡ˆï¼Œåªä¸è¿‡æ²¡æœ‰å¤„ç†å¥½è¿™ä¸ªå°ç³»ç»Ÿbugã€‚</p>
<h1 id="æ–¹æ¡ˆ"><a href="#æ–¹æ¡ˆ" class="headerlink" title="æ–¹æ¡ˆ"></a>æ–¹æ¡ˆ</h1><h2 id="æ ¸å¿ƒæ–¹æ³•"><a href="#æ ¸å¿ƒæ–¹æ³•" class="headerlink" title="æ ¸å¿ƒæ–¹æ³•"></a>æ ¸å¿ƒæ–¹æ³•</h2><h3 id="NSBundle"><a href="#NSBundle" class="headerlink" title="NSBundle"></a>NSBundle</h3><p>å…¶å®å¤§å®¶åº”è¯¥çŸ¥é“ï¼Œæ— è®ºæ˜¯ä»£ç è¿˜æ˜¯Storyboard/Xibï¼Œæ˜¾ç¤ºçš„å›½é™…åŒ–å­—ç¬¦ä¸²éƒ½ä¼šèµ°è¿™ä¸ªæ–¹æ³•ï¼Œä¼ å…¥ä¸€ä¸ª<code>key</code>ï¼Œè·å–<code>localizedString</code>ã€‚</p>
<p><code>NSBundle</code>çš„æ–¹æ³•ï¼š</p>
<pre><code class="objective-c">- (NSString *)localizedStringForKey:(NSString *)key value:(nullable NSString *)value table:(nullable NSString *)tableName;
</code></pre>
<p>æ¯”å¦‚æˆ‘ä»¬å¸¸ç”¨çš„å®<code>NSLocalizedString(@&quot;done&quot;, nil)</code></p>
<pre><code class="objective-c">#define NSLocalizedString(key, comment) \
        [NSBundle.mainBundle localizedStringForKey:(key) value:@&quot;&quot; table:nil]
</code></pre>
<p>é‚£ä¹ˆä¸ºä½•ï¼Œç³»ç»Ÿåˆ‡æ¢è¯­è¨€çš„æ—¶å€™ï¼Œæ­¤æ–¹æ³•è¿”å›çš„å°±æ˜¯å¯¹åº”è¯­è¨€ï¼ˆå‰æåšäº†è¯¥è¯­è¨€çš„å›½é™…åŒ–ï¼‰çš„å­—ç¬¦ä¸²å‘¢ï¼ŸåŸå› åœ¨æ˜¯å“ªä¸ª<code>bundle</code>è°ƒç”¨äº†è¿™ä¸ªæ–¹æ³•ï¼Œä¸€èˆ¬é»˜è®¤çš„éƒ½æ˜¯<code>NSBundle.mainBundle</code>è¿™ä¸ªå¯¹è±¡ã€‚</p>
<pre><code> po [NSBundle allBundles]

&lt;__NSArrayI 0x608000052f60&gt;(
NSBundle &lt;/Users/DarkAngel/Library/Developer/CoreSimulator/Devices/CF831783-E4A6-4EC2-AB99-E04304331C3A/data/Containers/Bundle/Application/B391ED77-F57B-4B5E-9E53-CFD1245583D8/LanguageSettingsDemo.app/en.lproj&gt; (not yet loaded),
NSBundle &lt;/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk/System/Library/Frameworks/UIKit.framework/Artwork.bundle&gt; (not yet loaded),
DABundle &lt;/Users/DarkAngel/Library/Developer/CoreSimulator/Devices/CF831783-E4A6-4EC2-AB99-E04304331C3A/data/Containers/Bundle/Application/B391ED77-F57B-4B5E-9E53-CFD1245583D8/LanguageSettingsDemo.app&gt; (loaded)
)
</code></pre><p>å¯ä»¥çœ‹åˆ°æœ‰é»˜è®¤åŠ è½½çš„bundleï¼Œè¿˜æœ‰ä¸ªæ²¡åŠ è½½çš„en bundleã€‚æ‰€ä»¥ï¼Œåˆ‡æ¢è¯­è¨€ï¼Œå…¶å®åªè¦åˆ‡æ¢äº†<code>bundle</code>å¯¹è±¡ï¼Œå°±å¯ä»¥è®©è¿™ä¸ª<code>bundle</code>æ ¹æ®<code>key</code>è¿”å›ä¸åŒçš„<code>localizedString</code>ã€‚</p>
<h3 id="NSUserDefaults"><a href="#NSUserDefaults" class="headerlink" title="NSUserDefaults"></a>NSUserDefaults</h3><p>å…¶å®è¯­è¨€è®¾ç½®ï¼Œåªè¦ä¿®æ”¹<code>AppleLanguages</code>å¯¹åº”çš„å€¼å°±å¥½äº†ã€‚è¿™æ ·æ‰èƒ½åŠ è½½æ­£ç¡®è¯­è¨€çš„<code>Storyboard/Xib</code>ï¼Œä»¥åŠä¸€äº›<code>resources</code>(å›¾ç‰‡ä¹‹ç±»çš„)ã€‚</p>
<h2 id="å®ç°æ€è·¯"><a href="#å®ç°æ€è·¯" class="headerlink" title="å®ç°æ€è·¯"></a>å®ç°æ€è·¯</h2><p>æ–¹æ¡ˆå…¶å®å¾ˆç®€å•ï¼Œæ¯æ¬¡åˆ‡æ¢è¯­è¨€ï¼ŒæŠŠç”¨æˆ·é€‰æ‹©çš„è¯­è¨€ä¿å­˜åœ¨æœ¬åœ°ï¼ŒåŒæ—¶æ›´æ”¹<code>bundle</code>å¯¹è±¡ï¼Œç„¶ååˆ·æ–°é¡µé¢å°±å¯ä»¥äº†ã€‚</p>
<p><img src="http://ww2.sinaimg.cn/large/006tKfTcly1ff9ji4gz3kg306y0cce09.gif" alt=""></p>
<h2 id="æŠ€æœ¯ç»†èŠ‚"><a href="#æŠ€æœ¯ç»†èŠ‚" class="headerlink" title="æŠ€æœ¯ç»†èŠ‚"></a>æŠ€æœ¯ç»†èŠ‚</h2><h3 id="ä¿å­˜ç”¨æˆ·è®¾ç½®"><a href="#ä¿å­˜ç”¨æˆ·è®¾ç½®" class="headerlink" title="ä¿å­˜ç”¨æˆ·è®¾ç½®"></a>ä¿å­˜ç”¨æˆ·è®¾ç½®</h3><p>å¾ˆç®€å•ï¼Œä¿å­˜åœ¨<code>NSUserDefaults</code>é‡Œã€‚</p>
<p>è¿™é‡Œéœ€è¦è¯´æ˜çš„æ˜¯<strong>è·Ÿéšæ‰‹æœºç³»ç»Ÿ</strong>ï¼Œå³æ¸…é™¤ç”¨æˆ·è‡ªå®šä¹‰è®¾ç½®ï¼Œåªéœ€è¦å°†<code>AppleLanguages</code>å­—æ®µè®¾ä¸º<code>nil</code>å³å¯ã€‚</p>
<p>ä½†æ˜¯å½“<code>AppleLanguages</code>å­—æ®µè®¾ä¸ºnilï¼Œä½ å†å»è·å–å®ƒçš„å€¼æ—¶ï¼Œä¼šå‘ç°ä»–å·²ç»å˜æˆäº†ç³»ç»Ÿè¯­è¨€çš„é»˜è®¤å€¼ã€‚è¿™é‡Œå¯ä»¥å‚è€ƒ<a href="http://blog.darkangel7.com/2017/05/05/iOSä¸­NSUserDefaultsçš„é»‘ç§‘æŠ€/">è¿™ç¯‡æ–‡ç« </a>ã€‚</p>
<p>.h</p>
<pre><code class="objective-c">/**
 è®¾ç½®ç±»
 */
@interface UWConfig : NSObject
/**
 ç”¨æˆ·è‡ªå®šä¹‰ä½¿ç”¨çš„è¯­è¨€ï¼Œå½“ä¼ nilæ—¶ï¼Œç­‰åŒäºresetSystemLanguage
 */
@property (class, nonatomic, strong, nullable) NSString *userLanguage;
/**
 é‡ç½®ç³»ç»Ÿè¯­è¨€
 */
+ (void)resetSystemLanguage;
@end
</code></pre>
<p>.m</p>
<pre><code class="objective-c">#import &quot;UWConfig.h&quot;

static NSString *const UWUserLanguageKey = @&quot;UWUserLanguageKey&quot;;
#define STANDARD_USER_DEFAULT  [NSUserDefaults standardUserDefaults]

@implementation UWConfig
+ (void)setUserLanguage:(NSString *)userLanguage
{
    //è·Ÿéšæ‰‹æœºç³»ç»Ÿ
    if (!userLanguage.length) {
        [self resetSystemLanguage];
        return;
    }
    //ç”¨æˆ·è‡ªå®šä¹‰
    [STANDARD_USER_DEFAULT setValue:userLanguage forKey:UWUserLanguageKey];
    [STANDARD_USER_DEFAULT setValue:@[userLanguage] forKey:@&quot;AppleLanguages&quot;];
    [STANDARD_USER_DEFAULT synchronize];
}

+ (NSString *)userLanguage
{
    return [STANDARD_USER_DEFAULT valueForKey:UWUserLanguageKey];
}

/**
 é‡ç½®ç³»ç»Ÿè¯­è¨€
 */
+ (void)resetSystemLanguage
{
    [STANDARD_USER_DEFAULT removeObjectForKey:UWUserLanguageKey];
    [STANDARD_USER_DEFAULT setValue:nil forKey:@&quot;AppleLanguages&quot;];
    [STANDARD_USER_DEFAULT synchronize];
}

@end
</code></pre>
<p>åœ¨éœ€è¦çš„åœ°æ–¹è°ƒç”¨å³å¯ï¼Œå¦‚</p>
<pre><code class="objective-c">   if (indexPath.row == 0) {
        [UWConfig setUserLanguage:nil];
    } else if (indexPath.row == 1) {
        [UWConfig setUserLanguage:@&quot;zh-Hans&quot;];
    } else {
        [UWConfig setUserLanguage:@&quot;en&quot;];
    }
</code></pre>
<h3 id="åˆ‡æ¢Bundle"><a href="#åˆ‡æ¢Bundle" class="headerlink" title="åˆ‡æ¢Bundle"></a>åˆ‡æ¢Bundle</h3><p>å½“éœ€è¦å±•ç¤ºå†…å®¹æ—¶ï¼Œæ‰éœ€è¦ç”¨åˆ°<code>bundle</code>ï¼Œæˆ‘ä»¬è¦æ‰‹åŠ¨åˆ‡æ¢<code>bundle</code>å¯¹è±¡ï¼Œå°±ç”¨åˆ°äº†è¿™å‡ ä¸ªæ–¹æ³•ï¼š</p>
<pre><code class="objective-c">+ (nullable instancetype)bundleWithPath:(NSString *)path;
- (nullable instancetype)initWithPath:(NSString *)path NS_DESIGNATED_INITIALIZER;

+ (nullable instancetype)bundleWithURL:(NSURL *)url NS_AVAILABLE(10_6, 4_0);
- (nullable instancetype)initWithURL:(NSURL *)url NS_AVAILABLE(10_6, 4_0);
</code></pre>
<p>è¿™é‡Œç›´æ¥ä¸Šä»£ç </p>
<p>.h</p>
<pre><code class="objective-c">@interface NSBundle (UWUtils)

+ (BOOL)isChineseLanguage;

+ (NSString *)currentLanguage;

@end
</code></pre>
<p>.m</p>
<pre><code class="objective-c">#import &quot;NSBundle+UWUtils.h&quot;

@interface UWBundle : NSBundle

@end

@implementation NSBundle (UWUtils)

+ (BOOL)isChineseLanguage
{
    NSString *currentLanguage = [self currentLanguage];
    if ([currentLanguage hasPrefix:@&quot;zh-Hans&quot;]) {
        return YES;
    } else {
        return NO;
    }
}

+ (NSString *)currentLanguage
{
    return [UWConfig userLanguage] ? : [NSLocale preferredLanguages].firstObject;
}

+ (void)load
{
    static dispatch_once_t onceToken;
    dispatch_once(&amp;onceToken, ^{
        //åŠ¨æ€ç»§æ‰¿ã€äº¤æ¢ï¼Œæ–¹æ³•ç±»ä¼¼KVOï¼Œé€šè¿‡ä¿®æ”¹[NSBundle mainBundle]å¯¹è±¡çš„isaæŒ‡é’ˆï¼Œä½¿å…¶æŒ‡å‘å®ƒçš„å­ç±»UWBundleï¼Œè¿™æ ·ä¾¿å¯ä»¥è°ƒç”¨å­ç±»çš„æ–¹æ³•ï¼›å…¶å®è¿™é‡Œä¹Ÿå¯ä»¥ä½¿ç”¨method_swizzlingæ¥äº¤æ¢mainBundleçš„å®ç°ï¼Œæ¥åŠ¨æ€åˆ¤æ–­ï¼Œå¯ä»¥åŒæ ·å®ç°ã€‚
        object_setClass([NSBundle mainBundle], [UWBundle class]);
    });
}

@end

@implementation UWBundle

- (NSString *)localizedStringForKey:(NSString *)key value:(NSString *)value table:(NSString *)tableName
{
    if ([UWBundle uw_mainBundle]) {
        return [[UWBundle uw_mainBundle] localizedStringForKey:key value:value table:tableName];
    } else {
        return [super localizedStringForKey:key value:value table:tableName];
    }
}

+ (NSBundle *)uw_mainBundle
{
    if ([NSBundle currentLanguage].length) {
        NSString *path = [[NSBundle mainBundle] pathForResource:[NSBundle currentLanguage] ofType:@&quot;lproj&quot;];
        if (path.length) {
            return [NSBundle bundleWithPath:path];
        }
    }
    return nil;
}

@end
</code></pre>
<p>è¿™é‡Œæ¶‰åŠåˆ°äº†<code>runtime</code>çš„ä½¿ç”¨ï¼Œä»£ç ä¸­æœ‰æ³¨é‡Šï¼Œè¿™é‡Œå°±ä¸å±•å¼€äº†ã€‚</p>
<h3 id="åˆ·æ–°é¡µé¢"><a href="#åˆ·æ–°é¡µé¢" class="headerlink" title="åˆ·æ–°é¡µé¢"></a>åˆ·æ–°é¡µé¢</h3><p>ç”¨å¾®ä¿¡çš„æ€è·¯ï¼Œç®€å•åŒ–ï¼Œä¸å¿…è¦å¤„ç†å¾ˆå¤šï¼Œæˆ‘ä»¬åªè¦æ›¿æ¢<code>keyWindow</code>çš„<code>rootViewController</code>å°±å¥½ï¼ŒåŒæ—¶è§£å†³å¾®ä¿¡çš„bugã€‚</p>
<pre><code class="objective-c">    UITabBarController *tbc = [[UIStoryboard storyboardWithName:@&quot;Main&quot; bundle:[NSBundle mainBundle]] instantiateInitialViewController];
    //æˆ‘è¿™é‡Œçš„storyboardä¸ºäº†ä¾¿äºå¤šäººåˆä½œï¼Œè¿™é‡ŒåªåŒ…å«æ ¹tabBarControllerå’Œå¤šä¸ªnvcï¼Œæ¯ä¸ªnvcåªæœ‰è‡ªå·±çš„rootViewController
    //è·³è½¬åˆ°ä¸ªäººä¸­å¿ƒ
    tbc.selectedIndex = 4;
    //åˆ›å»ºè®¾ç½®é¡µé¢
    UWSettingViewController *vc1 = [[UIStoryboard storyboardWithName:@&quot;Main&quot; bundle:[NSBundle mainBundle]] instantiateViewControllerWithIdentifier:NSStringFromClass([UWSettingViewController class])];
    vc1.hidesBottomBarWhenPushed = YES;
    //åˆ›å»ºè¯­è¨€åˆ‡æ¢é¡µ
    UWLanguageSettingsViewController *vc2 = [[UIStoryboard storyboardWithName:@&quot;Main&quot; bundle:[NSBundle mainBundle]] instantiateViewControllerWithIdentifier:NSStringFromClass([UWLanguageSettingsViewController class])];
    vc2.hidesBottomBarWhenPushed = YES;
    UINavigationController *nvc = tbc.selectedViewController;
    //å¤‡ç”¨
    NSMutableArray *vcs = nvc.viewControllers.mutableCopy;
    [vcs addObjectsFromArray:@[vc1, vc2]];
    //è§£å†³å¥‡æ€ªçš„åŠ¨ç”»bugã€‚å¼‚æ­¥æ‰§è¡Œ
    dispatch_async(dispatch_get_main_queue(), ^{
        //æ³¨æ„åˆ·æ–°rootViewControllerçš„æ—¶æœºï¼Œåœ¨ä¸»çº¿ç¨‹å¼‚æ­¥æ‰§è¡Œ
        //å…ˆåˆ·æ–°rootViewController
        [UIApplication sharedApplication].keyWindow.rootViewController = tbc;
        //ç„¶åå†ç»™ä¸ªäººä¸­å¿ƒçš„nvcè®¾ç½®viewControllers
        nvc.viewControllers = vcs;
        //ä¸€äº›UIæç¤ºï¼Œå¯ä»¥æä¾›æ›´å‹å¥½çš„ç”¨æˆ·äº¤äº’ï¼ˆä¹Ÿå¯ä»¥åˆ æ‰ï¼‰
        [UWProgressHUD showLoadingWithMessage:NSLocalizedString(UWSettingMessage, nil)];
        dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(.5 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^{
            [UWProgressHUD dismiss];
        });
    });
</code></pre>
<p>æ•´ä½“ä¸‹æ¥ï¼Œå°±å¯ä»¥å®ç°åœ¨Appå†…ä¼˜é›…çš„åˆ‡æ¢è¯­è¨€ã€‚</p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>å…¶å®åœ¨å®è·µè¿‡ç¨‹ä¸­ï¼Œå‘è¿˜æ˜¯å¾ˆå¤šçš„ï¼Œæ¬¢è¿æé—®ã€‚</p>
<p>ä¸‹é¢é™„ä¸Šä¸ªç®€å•çš„<a href="https://github.com/DarkAngel7/Demos-LanguageSettingsDemo/" target="_blank" rel="external">Demo</a>ï¼Œæ˜¯ä¸Šé¢è¯´çš„ç®€åŒ–ç‰ˆæœ¬ï¼Œå¤§å®¶æœ‰éœ€è¦å¯ä»¥ä¸‹è½½çœ‹ä¸‹ã€‚é‡Œé¢æœ‰å°ç¦åˆ©å“¦ï¼Œæ…¢æ…¢æ‰¾å§~</p>
<p>æœ€åï¼Œ<a href="https://itunes.apple.com/cn/app/you-ke-gong-chang/id1034170822?mt=8" target="_blank" rel="external">ä¼˜å®¢å·¥åœº</a>æ¬¢è¿æ‚¨ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h1&gt;&lt;p&gt;éšç€å…¬å¸ä¸šåŠ¡çš„å‘å±•ï¼ŒAppç‰ˆæœ¬çš„è¿­ä»£ï¼Œç›¸ä¿¡ä¸å°‘Appéƒ½éœ€è¦è‹±æ–‡åŒ–ï¼ˆå›½é™…åŒ–ï¼‰ã€‚Appè‹±æ–‡åŒ–ï¼Œä¸å¤–ä¹è¿™ä¸‰ç‚¹ï¼š&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;çº¯ä»£ç ä¸­
    
    </summary>
    
    
      <category term="iOSæŠ€æœ¯åˆ†äº«" scheme="http://blog.darkangel7.com/tags/iOS%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
  </entry>
  
  <entry>
    <title>Jenkinséƒ¨ç½²MacOS Slaveå®ç°æŒç»­é›†æˆ(iOS)</title>
    <link href="http://blog.darkangel7.com/2017/04/28/Jenkins%E9%83%A8%E7%BD%B2MacOS%20Slave%E5%AE%9E%E7%8E%B0%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90(iOS)/"/>
    <id>http://blog.darkangel7.com/2017/04/28/Jenkinséƒ¨ç½²MacOS Slaveå®ç°æŒç»­é›†æˆ(iOS)/</id>
    <published>2017-04-28T10:49:16.000Z</published>
    <updated>2017-05-04T04:30:05.000Z</updated>
    
    <content type="html"><![CDATA[<p>è§£å†³LinuxæœåŠ¡å™¨ä¸Šçš„Jenkinsæ— æ³•æ„å»ºXcodeå·¥ç¨‹</p>
<h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>ç”±äºLinuxæœåŠ¡å™¨æ— æ³•å®‰è£…Xcodeï¼Œæ‰€ä»¥Jenkinsæ— æ³•é€šè¿‡shellæ¥è°ƒç”¨xcodebuildã€xcrunç­‰å‘½ä»¤æ¥æ„å»ºXcodeå·¥ç¨‹ï¼Œå› æ­¤æ— æ³•æŒç»­é›†æˆï¼Œæ•æ·å¼€å‘ã€‚ä¸‹é¢ä»‹ç»ä¸€ç§é…ç½®JenkinsèŠ‚ç‚¹çš„æ–¹å¼ï¼Œæ¥å®ç°Linuxä¸Šçš„Jenkinsæ„å»ºXcodeå·¥ç¨‹ï¼Œå¹¶ä¸Šä¼ ipaåˆ°è’²å…¬è‹±pgyeræ¥è¿›è¡Œæµ‹è¯•ã€‚</p>
<h2 id="ä¸€ã€é…ç½®MacOS-Slave"><a href="#ä¸€ã€é…ç½®MacOS-Slave" class="headerlink" title="ä¸€ã€é…ç½®MacOS Slave"></a>ä¸€ã€é…ç½®MacOS Slave</h2><p>Jenkinsæœ‰ä¸ªå¼ºå¤§çš„åŠŸèƒ½ï¼Œé…ç½®Slave(å¥´éš¶)æœåŠ¡å™¨ï¼Œæ¥å®ç°åˆ†å¸ƒå¼éƒ¨ç½²æ„å»ºã€‚å…·ä½“æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<h3 id="1-é…ç½®Macç”µè„‘ã€‚"><a href="#1-é…ç½®Macç”µè„‘ã€‚" class="headerlink" title="1. é…ç½®Macç”µè„‘ã€‚"></a>1. é…ç½®Macç”µè„‘ã€‚</h3><p>åœ¨<strong>ç³»ç»Ÿåå¥½è®¾ç½®</strong> &gt; <strong>å…±äº«</strong> ä¸­å¼€å¯ <strong>è¿œç¨‹ç™»å½•</strong>ï¼Œå¦‚ä¸‹å›¾ï¼š<br><img src="https://ww3.sinaimg.cn/large/006tNc79ly1ff2hls2iauj31140tidjg.jpg" alt=""> </p>
<h3 id="2-åˆ›å»ºèŠ‚ç‚¹ã€‚"><a href="#2-åˆ›å»ºèŠ‚ç‚¹ã€‚" class="headerlink" title="2. åˆ›å»ºèŠ‚ç‚¹ã€‚"></a>2. åˆ›å»ºèŠ‚ç‚¹ã€‚</h3><p>Jenkins &gt; ç³»ç»Ÿç®¡ç† &gt;  ç®¡ç†èŠ‚ç‚¹ &gt; æ–°å»ºèŠ‚ç‚¹ï¼Œè¾“å…¥èŠ‚ç‚¹åç§°ï¼Œè®°å¾—å‹¾é€‰ <code>Permanent Agent</code>ï¼Œç‚¹å‡»OKã€‚</p>
<h3 id="3-é…ç½®èŠ‚ç‚¹ã€‚"><a href="#3-é…ç½®èŠ‚ç‚¹ã€‚" class="headerlink" title="3. é…ç½®èŠ‚ç‚¹ã€‚"></a>3. é…ç½®èŠ‚ç‚¹ã€‚</h3><p><img src="https://ww2.sinaimg.cn/large/006tNc79ly1ff2hfwxx8ej31eg0ts0wt.jpg" alt="">å…¶ä¸­è¦ä¿è¯<code>/User/Shared/Jenkins/</code>ç›®å½•çš„æƒé™ä¸ºsshé“¾æ¥çš„ç”¨æˆ·å¯è¯»å†™ã€‚</p>
<p>Hostæ˜¯Macçš„ipåœ°å€ï¼ŒCredentialsæ˜¯sshç™»å½•Macæ—¶éœ€è¦çš„è´¦æˆ·å’Œå¯†ç ã€‚å¯ä»¥æ·»åŠ ä¸€ä¸ª</p>
<p><img src="https://ww4.sinaimg.cn/large/006tNc79ly1ff2hhcg0f1j31gq0r842o.jpg" alt=""></p>
<p><strong>ä¸‹é¢çš„éƒ¨åˆ†å¾ˆé‡è¦</strong>ï¼š<img src="https://ww2.sinaimg.cn/large/006tNc79ly1ff2hiwj7mpj31gs0p4dj8.jpg" alt=""></p>
<p>PATHç¯å¢ƒå˜é‡ï¼Œéœ€è¦åœ¨Macä¸Šé€šè¿‡</p>
<pre><code>echo $PATH
/opt/iOSOpenDev/bin:/opt/local/bin:/opt/local/sbin:/opt/local/bin:/opt/local/sbin:/opt/local/bin:/opt/local/sbin:/opt/local/bin:/opt/local/sbin:/opt/local/bin:/opt/local/sbin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/local/bin:/opt/local/sbin/
</code></pre><p>è·å–ï¼Œç„¶åcopyè¿‡å»ã€‚</p>
<p>Keychains and Provisioning Profilesè·¯å¾„è¦å¡«å†™æ­£ç¡®ã€‚æ²¡æœ‰è¿™ä¸ªé€‰é¡¹çš„å®‰è£…<a href="http://wiki.jenkins-ci.org/display/JENKINS/Keychains+and+Provisioning+Profiles+Plugin" target="_blank" rel="external">Keychains and Provisioning Profiles Management</a>æ’ä»¶ã€‚</p>
<h3 id="4-æœ€åä¿å­˜ã€‚"><a href="#4-æœ€åä¿å­˜ã€‚" class="headerlink" title="4. æœ€åä¿å­˜ã€‚"></a>4. æœ€åä¿å­˜ã€‚</h3><p>å¦‚æœçœ‹åˆ°</p>
<p><img src="https://ww2.sinaimg.cn/large/006tNc79ly1ff2hwlrqw8j30e203uglm.jpg" alt=""></p>
<p>å³æ·»åŠ Mac SlaveæˆåŠŸï¼Œä¸”Mac Slaveåœ¨çº¿ã€‚è‹¥è¿ä¸ä¸Šï¼Œè¯·åå¤ç¡®è®¤<strong>è¿œç¨‹å·¥ä½œç›®å½•</strong>çš„æƒé™ã€‚</p>
<h2 id="äºŒã€é…ç½®Jenkinsç³»ç»Ÿè®¾ç½®ã€‚"><a href="#äºŒã€é…ç½®Jenkinsç³»ç»Ÿè®¾ç½®ã€‚" class="headerlink" title="äºŒã€é…ç½®Jenkinsç³»ç»Ÿè®¾ç½®ã€‚"></a>äºŒã€é…ç½®Jenkinsç³»ç»Ÿè®¾ç½®ã€‚</h2><h3 id="1-ä¸Šä¼ è¯ä¹¦å’Œæè¿°æ–‡ä»¶ã€‚"><a href="#1-ä¸Šä¼ è¯ä¹¦å’Œæè¿°æ–‡ä»¶ã€‚" class="headerlink" title="1. ä¸Šä¼ è¯ä¹¦å’Œæè¿°æ–‡ä»¶ã€‚"></a>1. ä¸Šä¼ è¯ä¹¦å’Œæè¿°æ–‡ä»¶ã€‚</h3><p>åœ¨ <strong>Jenkins</strong> &gt; <strong>ç³»ç»Ÿç®¡ç†</strong> &gt; <strong>Keychains and Provisioning Profiles Management</strong>ä¸­ä¸Šä¼ æ‰“åŒ…ç”¨çš„è¯ä¹¦å’Œæè¿°æ–‡ä»¶ã€‚å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="https://ww4.sinaimg.cn/large/006tNc79ly1ff2jcabj18j31kw0tijyh.jpg" alt=""></p>
<p><img src="https://ww2.sinaimg.cn/large/006tNc79ly1ff2jclndwnj31jy0siwic.jpg" alt=""></p>
<p>ä¿å­˜ã€‚</p>
<h3 id="2-åœ¨-Jenkins-gt-ç³»ç»Ÿç®¡ç†-gt-ç³»ç»Ÿè®¾ç½®ï¼ˆå…¨å±€è®¾ç½®ï¼‰ä¸­è®¾ç½®ï¼š"><a href="#2-åœ¨-Jenkins-gt-ç³»ç»Ÿç®¡ç†-gt-ç³»ç»Ÿè®¾ç½®ï¼ˆå…¨å±€è®¾ç½®ï¼‰ä¸­è®¾ç½®ï¼š" class="headerlink" title="2. åœ¨ Jenkins &gt; ç³»ç»Ÿç®¡ç† &gt; ç³»ç»Ÿè®¾ç½®ï¼ˆå…¨å±€è®¾ç½®ï¼‰ä¸­è®¾ç½®ï¼š"></a>2. åœ¨ <strong>Jenkins</strong> &gt; <strong>ç³»ç»Ÿç®¡ç†</strong> &gt; <strong>ç³»ç»Ÿè®¾ç½®</strong>ï¼ˆå…¨å±€è®¾ç½®ï¼‰ä¸­è®¾ç½®ï¼š</h3><p><img src="https://ww1.sinaimg.cn/large/006tNc79ly1ff2j6764qgj31ei0t6adx.jpg" alt=""></p>
<p>å¾ˆå…³é”®ã€‚<strong>Keychain</strong>çš„è·¯å¾„å’Œå¯†ç éœ€è¦å¡«å†™Macä¸­ç™»å½•ç”¨æˆ·çš„å¯†ç ã€‚</p>
<h3 id="3-åœ¨-Jenkins-gt-ç³»ç»Ÿç®¡ç†-gt-Configure-Global-Security-ä¸­é…ç½®ï¼š"><a href="#3-åœ¨-Jenkins-gt-ç³»ç»Ÿç®¡ç†-gt-Configure-Global-Security-ä¸­é…ç½®ï¼š" class="headerlink" title="3. åœ¨ Jenkins &gt; ç³»ç»Ÿç®¡ç† &gt; Configure Global Security ä¸­é…ç½®ï¼š"></a>3. åœ¨ <strong>Jenkins</strong> &gt; <strong>ç³»ç»Ÿç®¡ç†</strong> &gt; <strong>Configure Global Security</strong> ä¸­é…ç½®ï¼š</h3><p><img src="https://ww2.sinaimg.cn/large/006tNc79ly1ff2j8ffcsrj31jw0ckjt4.jpg" alt=""></p>
<p>å¼€å¯Safe HTMLã€‚</p>
<h2 id="ä¸‰ã€é…ç½®iOSé¡¹ç›®ã€‚"><a href="#ä¸‰ã€é…ç½®iOSé¡¹ç›®ã€‚" class="headerlink" title="ä¸‰ã€é…ç½®iOSé¡¹ç›®ã€‚"></a>ä¸‰ã€é…ç½®iOSé¡¹ç›®ã€‚</h2><h3 id="1-å®‰è£…æ’ä»¶ã€‚"><a href="#1-å®‰è£…æ’ä»¶ã€‚" class="headerlink" title="1. å®‰è£…æ’ä»¶ã€‚"></a>1. å®‰è£…æ’ä»¶ã€‚</h3><p>å®‰è£… <code>build-name-setter</code>ã€<code>description setter plugin</code>æ’ä»¶ã€‚</p>
<h3 id="2-Jenkins-gt-æ–°å»ºã€‚"><a href="#2-Jenkins-gt-æ–°å»ºã€‚" class="headerlink" title="2. Jenkins &gt; æ–°å»ºã€‚"></a>2. <strong>Jenkins</strong> &gt; <strong>æ–°å»º</strong>ã€‚</h3><p><img src="https://ww2.sinaimg.cn/large/006tNc79ly1ff2iw797sjj318q0vidm6.jpg" alt=""></p>
<h3 id="3-General"><a href="#3-General" class="headerlink" title="3. General."></a>3. <strong>General</strong>.</h3><p><img src="https://ww3.sinaimg.cn/large/006tNc79ly1ff2jedt21qj31kw0u2afo.jpg" alt=""></p>
<p>è¿™é‡Œæ·»åŠ äº†å‚æ•°åŒ–æ„å»ºè¿‡ç¨‹ï¼Œä¸ºäº†åœ¨æ¯æ¬¡Buildæ—¶ï¼Œå¯ä»¥å¡«å†™æ›´æ–°è¯´æ˜ï¼Œæ‰€ä»¥è¿™é‡Œå¤©æ·»åŠ äº†åä¸º<code>News</code>çš„å‚æ•°ï¼Œå½“ç”¨æˆ·æ„å»ºæ—¶å¡«å†™äº†å†…å®¹ï¼Œå¯ä»¥åœ¨ä¹‹åçš„è„šæœ¬ä¸­é€šè¿‡<code>${News}</code>æ¥è·å–<code>News</code>çš„å€¼ã€‚</p>
<p><img src="https://ww1.sinaimg.cn/large/006tNc79ly1ff2jf005ogj31kw0o1q5k.jpg" alt=""></p>
<p>è¿™é‡ŒæŒ‡å®šMac SlaveæœåŠ¡å™¨ä½œä¸ºæ„å»ºXcodeå·¥ç¨‹çš„SlaveæœåŠ¡å™¨ï¼ŒXcodeæ‰“åŒ…æ„å»ºå…¨éƒ¨äº¤ç»™è¿™ä¸ªèŠ‚ç‚¹ï¼ˆSlaveæœåŠ¡å™¨ï¼‰æ¥å®Œæˆã€‚</p>
<p><img src="https://ww1.sinaimg.cn/large/006tNc79ly1ff2jfc0bfij31kw0d2jsv.jpg" alt=""></p>
<h3 id="4-æºç ç®¡ç†ã€‚"><a href="#4-æºç ç®¡ç†ã€‚" class="headerlink" title="4. æºç ç®¡ç†ã€‚"></a>4. æºç ç®¡ç†ã€‚</h3><p><img src="https://ww4.sinaimg.cn/large/006tNc79ly1ff2jh0iaijj31jk0uk41x.jpg" alt=""></p>
<p>è¿™é‡Œå¡«å†™æœ¬åœ°æˆ–è€…è¿œç¨‹çš„ä»£ç ä»“åº“ï¼ˆå¦‚gitlabæˆ–è€…gitï¼‰ã€‚ä¸‹é¢çš„Branchå¡«å†™æŒ‡å®šåˆ†æ”¯ã€‚</p>
<h3 id="5-æ„å»ºè§¦å‘å™¨ã€‚"><a href="#5-æ„å»ºè§¦å‘å™¨ã€‚" class="headerlink" title="5. æ„å»ºè§¦å‘å™¨ã€‚"></a>5. æ„å»ºè§¦å‘å™¨ã€‚</h3><p>è¿™é‡Œæš‚æ—¶ä¸è®¾ç½®ï¼Œè®¾ç½®äº†å¯ä»¥è‡ªåŠ¨åŒ–æµ‹è¯•ï¼Œå’Œå…¶ä»–è„šæœ¬é…åˆä½¿ç”¨ã€‚</p>
<h3 id="6-æ„å»ºç¯å¢ƒã€‚"><a href="#6-æ„å»ºç¯å¢ƒã€‚" class="headerlink" title="6. æ„å»ºç¯å¢ƒã€‚"></a>6. æ„å»ºç¯å¢ƒã€‚</h3><p><img src="https://ww1.sinaimg.cn/large/006tNc79ly1ff2jqxdzccj31kw0txq9d.jpg" alt=""></p>
<p><img src="https://ww3.sinaimg.cn/large/006tNc79ly1ff2jssknawj31kw0pnn2s.jpg" alt=""></p>
<p>æŠŠä¹‹å‰ä¸Šä¼ çš„è¯ä¹¦å’Œæè¿°æ–‡ä»¶æ·»åŠ ä¸Šã€‚</p>
<p>è®¾ç½®Buildåç§°ï¼Œè¿™é‡Œæ·»åŠ äº†è‡ªå®šä¹‰åç§°ã€‚æ³¨æ„ï¼Œé«˜çº§é‡Œé¢åªå‹¾é€‰ç¬¬ä¸€ä¸ªï¼Œä¸è¦å‹¾é€‰ <code>Set build name after build ends</code>ï¼Œå¦åˆ™ä¼šæŠ¥é”™ã€‚</p>
<h3 id="7-æ„å»º"><a href="#7-æ„å»º" class="headerlink" title="7. æ„å»º"></a>7. æ„å»º</h3><p><img src="https://ww2.sinaimg.cn/large/006tNc79ly1ff2jwre537j31kw0pygr0.jpg" alt=""></p>
<p>è¿™é‡Œä½¿ç”¨çš„è„šæœ¬ã€‚</p>
<pre><code>export LANG=&quot;en_US.UTF-8&quot;

security -v unlock-keychain -p &quot;yourpassword&quot;

ipa_name=&quot;URWork_iOS_beta&quot;
build_path=&quot;${WORKSPACE}/build/&quot;
fastlane gym --workspace URWorkClient.xcworkspace --scheme URWorkClient --clean --configuration Beta --export_method ad-hoc --output_name ${ipa_name} --output_directory ${build_path}

curl -F &quot;file=@${build_path}${ipa_name}.ipa&quot; \
-F &quot;uKey=yourUKey&quot; \
-F &quot;_api_key=yourApiKey&quot; \
-F &quot;updateDescription=${News}&quot; \
https://www.pgyer.com/apiv1/app/upload
</code></pre><h4 id="æœ€é‡è¦ã€æœ€é‡è¦ã€æœ€é‡è¦ï¼š"><a href="#æœ€é‡è¦ã€æœ€é‡è¦ã€æœ€é‡è¦ï¼š" class="headerlink" title="æœ€é‡è¦ã€æœ€é‡è¦ã€æœ€é‡è¦ï¼š"></a><strong>æœ€é‡è¦ã€æœ€é‡è¦ã€æœ€é‡è¦ï¼š</strong></h4><p>LinuxæœåŠ¡å™¨ä¸Šçš„Jenkinsè°ƒç”¨Mac Slaveæ—¶ï¼Œæ˜¯é€šè¿‡ä¹‹å‰è®¾ç½®çš„<strong>SSH</strong>ç™»å½•çš„æ–¹å¼ï¼Œè€ŒAppleä¸ºäº†å®‰å…¨ï¼Œåœ¨sshç™»å½•æ—¶ï¼Œæ˜¯ä¸å…è®¸è¯»å–<strong>Keychains</strong>ï¼ˆé’¥åŒ™ä¸²ï¼‰çš„ï¼Œæ‰€ä»¥ <code>security -v unlock-keychain -p &quot;yourpassword&quot;</code>è¿™è¡Œå‘½ä»¤å°±å¾ˆé‡è¦äº†ã€‚åœ¨æ„å»ºæ‰“åŒ…å‰ï¼Œå…ˆè§£é”Keychainsã€‚</p>
<p>å½“ç„¶è¿™é‡Œ <strong>fastlane</strong> å·²ç»æå‰é€šè¿‡<strong>Homebrew</strong>å®‰è£…å¥½äº†ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚</p>
<blockquote>
<p><em>æ•´ä½“è„šæœ¬çš„æµç¨‹æ˜¯ï¼Œå…ˆè§£é”Keychainï¼Œç„¶åç”¨fastlaneå¿«é€Ÿæ‰“åŒ…ï¼Œæœ€åä¸Šä¼ åˆ°è’²å…¬è‹±å¹³å°ï¼Œç­‰å¾…æµ‹è¯•ã€‚</em></p>
</blockquote>
<h3 id="8-æ„å»ºåæ“ä½œã€‚"><a href="#8-æ„å»ºåæ“ä½œã€‚" class="headerlink" title="8. æ„å»ºåæ“ä½œã€‚"></a>8. æ„å»ºåæ“ä½œã€‚</h3><p><img src="https://ww2.sinaimg.cn/large/006tNc79ly1ff2k7cb7ptj31kw0ktjue.jpg" alt=""></p>
<p>é™„ä»£ç ï¼š</p>
<pre><code>&lt;h3&gt;æ›´æ–°è¯´æ˜:&lt;/h3&gt;&lt;p&gt;${News}&lt;/p&gt;&lt;a href=&quot;http://www.pgyer.com/urwork_ios&quot; style=&quot;display:block;margin:10px 0px;&quot; target=&quot;_blank&quot;&gt;ç‚¹å‡»è·³è½¬åˆ°ä¸‹è½½é¡µ&lt;/a&gt;&lt;/br&gt;&lt;img src=&quot;http://www.pgyer.com/app/qrcode/urwork_ios&quot;&gt;
</code></pre><p>æ„å»ºå®Œæˆåï¼ŒæŠŠä¹‹å‰ç”¨æˆ·è¾“å…¥çš„<strong>æ›´æ–°è¯´æ˜</strong>ä»¥åŠ<strong>è’²å…¬è‹±ä¸‹è½½åœ°å€</strong>å’Œ<strong>äºŒç»´ç </strong>é€šé€šæ˜¾ç¤ºåœ¨Build Descriptionä¸­ã€‚</p>
<h2 id="å››ã€æ•´ä½“æµ‹è¯•"><a href="#å››ã€æ•´ä½“æµ‹è¯•" class="headerlink" title="å››ã€æ•´ä½“æµ‹è¯•"></a>å››ã€æ•´ä½“æµ‹è¯•</h2><h3 id="1-æ‰“å¼€Jenkinsã€‚"><a href="#1-æ‰“å¼€Jenkinsã€‚" class="headerlink" title="1. æ‰“å¼€Jenkinsã€‚"></a>1. æ‰“å¼€Jenkinsã€‚</h3><p><img src="https://ww1.sinaimg.cn/large/006tNc79ly1ff2kbajk7cj31kw0u6jxm.jpg" alt=""></p>
<h3 id="2-ç‚¹å‡»develop-iOSã€‚"><a href="#2-ç‚¹å‡»develop-iOSã€‚" class="headerlink" title="2. ç‚¹å‡»develop_iOSã€‚"></a>2. ç‚¹å‡»develop_iOSã€‚</h3><p><img src="https://ww1.sinaimg.cn/large/006tNc79ly1ff2kang8dkj31kw0tf7c5.jpg" alt=""></p>
<h3 id="3-ç‚¹å‡»Build-with-Parameters"><a href="#3-ç‚¹å‡»Build-with-Parameters" class="headerlink" title="3. ç‚¹å‡»Build with Parameters."></a>3. ç‚¹å‡»Build with Parameters.</h3><p><img src="https://ww2.sinaimg.cn/large/006tNc79ly1ff2kdk1zdfj31kw0tktds.jpg" alt=""></p>
<h3 id="4-å¼€å§‹æ„å»ºã€‚"><a href="#4-å¼€å§‹æ„å»ºã€‚" class="headerlink" title="4. å¼€å§‹æ„å»ºã€‚"></a>4. å¼€å§‹æ„å»ºã€‚</h3><p><img src="https://ww4.sinaimg.cn/large/006tNc79ly1ff2keezip1j31kw0tf10n.jpg" alt=""></p>
<h3 id="5-ç­‰å¾…æ„å»ºå®Œæˆå³å¯ã€‚"><a href="#5-ç­‰å¾…æ„å»ºå®Œæˆå³å¯ã€‚" class="headerlink" title="5. ç­‰å¾…æ„å»ºå®Œæˆå³å¯ã€‚"></a>5. ç­‰å¾…æ„å»ºå®Œæˆå³å¯ã€‚</h3><p>è¿™é‡Œä¹Ÿå¯ä»¥æŸ¥çœ‹æ„å»ºè¿›åº¦ï¼šç‚¹å‡»æœ€æ–°çš„ä¸€æ¬¡æ„å»º</p>
<p><img src="https://ww3.sinaimg.cn/large/006tNc79ly1ff2kg18untj31kw0s1tdq.jpg" alt=""></p>
<p>ç‚¹å‡»Console Output<br><img src="https://ww4.sinaimg.cn/large/006tNc79ly1ff2kgpirr9j31kw0sj13w.jpg" alt=""></p>
<p>åœ¨è¿™é‡Œå¯ä»¥æŸ¥çœ‹ä¸€äº›æ—¥å¿—ï¼Œå¦‚æœå‡ºé”™äº†ï¼Œä¹Ÿå¯ä»¥åœ¨è¿™é‡ŒæŸ¥è¯¢ã€‚</p>
<h2 id="äº”ã€æ€»ç»“ã€‚"><a href="#äº”ã€æ€»ç»“ã€‚" class="headerlink" title="äº”ã€æ€»ç»“ã€‚"></a>äº”ã€æ€»ç»“ã€‚</h2><p>ä½¿ç”¨Jenkinsæ‰“åŒ…Xcodeå·¥ç¨‹æ•´ä½“è¿‡ç¨‹å¾ˆæ›²æŠ˜ï¼Œå‘å¾ˆå¤šï¼ŒæŒ‰ç…§è¿™äº›æ¥ï¼Œå¯èƒ½è¿˜ä¼šé‡åˆ°ä¸€äº›é—®é¢˜ï¼Œé™„ä¸Šä¸€äº›é“¾æ¥ï¼Œä»¥ä¾›å‚è€ƒã€‚</p>
<h2 id="é™„"><a href="#é™„" class="headerlink" title="é™„"></a>é™„</h2><ul>
<li><a href="http://www.jianshu.com/p/371595ef08fe" target="_blank" rel="external">Jenkins+ Xcode+ è’²å…¬è‹± å®ç°IOSè‡ªåŠ¨åŒ–æ‰“åŒ…å’Œåˆ†å‘</a></li>
<li><a href="http://www.jianshu.com/p/41ecb06ae95f" target="_blank" rel="external">æ‰‹æŠŠæ‰‹æ•™ä½ åˆ©ç”¨JenkinsæŒç»­é›†æˆiOSé¡¹ç›®</a></li>
<li><a href="http://www.jianshu.com/p/62fa8083b45c" target="_blank" rel="external">Jenkinsç­¾åé—®é¢˜</a></li>
<li><a href="https://www.pgyer.com/doc/view/jenkins_ios" target="_blank" rel="external">ä½¿ç”¨ Jenkins å®ç°æŒç»­é›†æˆ (iOS)</a></li>
<li><a href="https://www.pgyer.com/doc/view/jenkins" target="_blank" rel="external">ä½¿ç”¨ Jenkins å®ç°æŒç»­é›†æˆ (Android)</a></li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;è§£å†³LinuxæœåŠ¡å™¨ä¸Šçš„Jenkinsæ— æ³•æ„å»ºXcodeå·¥ç¨‹&lt;/p&gt;
&lt;h2 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h2&gt;&lt;p&gt;ç”±äºLinuxæœåŠ¡å™¨æ— æ³•å®‰è£…Xcodeï¼Œæ‰€ä»¥Jenkinsæ— æ³•é€š
    
    </summary>
    
    
      <category term="iOSæŠ€æœ¯åˆ†äº«" scheme="http://blog.darkangel7.com/tags/iOS%E6%8A%80%E6%9C%AF%E5%88%86%E4%BA%AB/"/>
    
  </entry>
  
  <entry>
    <title>Hexo+Githubçš„Blogæ­å»º</title>
    <link href="http://blog.darkangel7.com/2016/08/19/Hexo+Github%E7%9A%84Blog%E6%90%AD%E5%BB%BA/"/>
    <id>http://blog.darkangel7.com/2016/08/19/Hexo+Githubçš„Blogæ­å»º/</id>
    <published>2016-08-19T04:40:16.000Z</published>
    <updated>2017-05-08T02:38:09.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="å®‰è£…ï¼š"><a href="#å®‰è£…ï¼š" class="headerlink" title="å®‰è£…ï¼š"></a>å®‰è£…ï¼š</h1><h2 id="ä¸€ã€å®‰è£…Homebrew"><a href="#ä¸€ã€å®‰è£…Homebrew" class="headerlink" title="ä¸€ã€å®‰è£…Homebrew"></a>ä¸€ã€å®‰è£…Homebrew</h2><p>Macä¸Šå·²ç»å®‰è£…äº†rubyç¯å¢ƒï¼Œåªéœ€è¦è¾“å…¥</p>
<pre><code>ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot;
</code></pre><h2 id="äºŒã€å®‰è£…node-js"><a href="#äºŒã€å®‰è£…node-js" class="headerlink" title="äºŒã€å®‰è£…node.js"></a>äºŒã€å®‰è£…node.js</h2><pre><code>sudo brew install node
</code></pre><h2 id="ä¸‰ã€å®‰è£…Hexo"><a href="#ä¸‰ã€å®‰è£…Hexo" class="headerlink" title="ä¸‰ã€å®‰è£…Hexo"></a>ä¸‰ã€å®‰è£…Hexo</h2><p>Hexoæ˜¯åŸºäºnode.jsçš„åšå®¢ç³»ç»Ÿï¼Œè¿™é‡Œå®‰è£…å°±å¯ä»¥äº†ã€‚</p>
<pre><code>sudo npm install -g hexo 
npm install hexo-renderer-ejs --save
npm install hexo-renderer-stylus --save
npm install hexo-renderer-marked --save
</code></pre><p>å®‰è£…å®Œæˆåï¼Œæ‰¾ä¸€ä¸ªæ”¾blogçš„ç›®å½•</p>
<pre><code>cd ~/Blog
</code></pre><p>ç„¶åæ‰§è¡Œåˆå§‹åŒ–</p>
<pre><code>hexo init
</code></pre><p>ç„¶åå¯ä»¥ç›´æ¥é¢„è§ˆhello word.md</p>
<pre><code>hexo g
hexo s
=&gt; [info] Hexo is running at localhost:4000/. Press Ctrl+C to stop.
</code></pre><p>gæ˜¯generate, sæ˜¯serverï¼Œè¿˜æœ‰dæ˜¯deployï¼ˆéƒ¨ç½²ï¼‰æ¨èç”¨é¦–å­—æ¯ï¼Œæ–¹ä¾¿å¿«æ·ã€‚</p>
<h2 id="å››ã€åˆ›å»ºBlog-Repository"><a href="#å››ã€åˆ›å»ºBlog-Repository" class="headerlink" title="å››ã€åˆ›å»ºBlog Repository"></a>å››ã€åˆ›å»ºBlog Repository</h2><p>åœ¨è‡ªå·±çš„Githubåˆ›å»ºBlogçš„ä»“åº“ï¼Œå¦‚Blog-Hexoï¼Œå‘½åæ— æ‰€è°“ã€‚è®°ä½å‹¾é€‰READMEã€‚</p>
<p><img src="http://ww4.sinaimg.cn/large/65e4f1e6jw1f72qarsjd9j20va0aydh0.jpg" alt="repository1"></p>
<p><img src="http://ww2.sinaimg.cn/large/65e4f1e6jw1f72qbhppqfj214a0sqq6q.jpg" alt="repository2"><br>åˆ›å»ºå®Œæ¯•ï¼Œç›´æ¥è¿›è¡Œåˆ°ä¸‹ä¸€æ­¥ã€‚</p>
<h2 id="äº”ã€è´­ä¹°åŸŸå"><a href="#äº”ã€è´­ä¹°åŸŸå" class="headerlink" title="äº”ã€è´­ä¹°åŸŸå"></a>äº”ã€è´­ä¹°åŸŸå</h2><p>æ¨èåœ¨ä¸‡ç½‘è´­ä¹°ï¼Œå›½å¤–çš„Godaddyä¹Ÿå¯ä»¥ã€‚ä»¥ä¸‡ç½‘ä¸ºä¾‹ï¼š<br>ä¹°å¥½åŸŸåå®åè®¤è¯äº†ä¹‹åï¼Œåˆ°<code>æ§åˆ¶å°</code> - <code>äº‘è§£æDNS</code>ä¸­æ·»åŠ ä¸€ä¸ªè§£æï¼Œå¦‚ï¼š</p>
<p><img src="http://ww4.sinaimg.cn/large/65e4f1e6jw1f72qblgcswj21kw01qglt.jpg" alt=""></p>
<p>CNAMEæ˜ å°„åˆ°è‡ªå·±çš„xxx.github.ioã€‚è¿™é‡Œçš„xxxæ˜¯ä½ çš„åœ¨githubçš„åç§°ï¼Œæˆ‘çš„æ˜¯<code>DarkAngel7</code>ã€‚<br>åœ¨ç»ˆç«¯ä¸­è¾“å…¥</p>
<pre><code>dig blog.darkangel7.com +nostats +nocomments +nocmd
</code></pre><p>å¦‚æœå‡ºç°ä¸‹é¢çš„ç»“æœï¼Œè¯æ˜è§£ææˆåŠŸã€‚</p>
<pre><code>DarkAngel-MacBook-Pro-2:Blog DarkAngel$ dig blog.darkangel7.com +nostats +nocomments +nocmd

; &lt;&lt;&gt;&gt; DiG 9.8.3-P1 &lt;&lt;&gt;&gt; blog.darkangel7.com +nostats +nocomments +nocmd
;; global options: +cmd
;blog.darkangel7.com.        IN    A
blog.darkangel7.com.    30    IN    CNAME    darkangel7.github.io.
darkangel7.github.io.    2516    IN    CNAME    github.map.fastly.net.
github.map.fastly.net.    30    IN    CNAME    prod.github.map.fastlylb.net.
prod.github.map.fastlylb.net. 30 IN    A    151.101.100.133
</code></pre><h2 id="å…­ã€Deploy"><a href="#å…­ã€Deploy" class="headerlink" title="å…­ã€Deploy"></a>å…­ã€Deploy</h2><p>ä¸Šä¸€æ­¥å®ŒæˆåŸŸååˆ°github pagesçš„å•å‘æ˜ å°„ã€‚æœ¬æ­¥å®Œæˆgithubåˆ°åŸŸåçš„æ˜ å°„ï¼Œå®Œæˆè¾“å…¥åŸŸåè§£æåˆ°å¯¹åº”çš„å†…å®¹ã€‚</p>
<p>é¦–å…ˆåœ¨Blog/sourceé‡Œåˆ›å»ºCNAME</p>
<pre><code>cd source
touch CNAME
vi CNAME
</code></pre><p>è¾“å…¥ä½ åœ¨ä¸Šä¸€æ­¥CNAMEçš„åŸŸåï¼Œå»ºç«‹æ˜ å°„å…³ç³»ã€‚</p>
<pre><code>blog.darkangel7.com
</code></pre><p>ä¿®æ”¹<code>_config.yml</code>æ–‡ä»¶ï¼Œé…ç½®ä¸€äº›ä¸œè¥¿ã€‚</p>
<pre><code># Deployment
## Docs: https://hexo.io/docs/deployment.html
deploy:
      type: git
      repository: git@github.com:DarkAngel7/Blog-Hexo.git
</code></pre><p>å®‰è£…gitæ’ä»¶</p>
<pre><code>npm install hexo-deployer-git --save
</code></pre><p>è¿™é‡Œrepositoryçš„åœ°å€å¯ä»¥æ˜¯httpsçš„ï¼Œä¹Ÿå¯ä»¥æ˜¯gitçš„ï¼Œåªä¸è¿‡gitéœ€è¦SSHè¯ä¹¦ï¼Œä¸€èˆ¬ç”¨httpså°±å¯ä»¥äº†ï¼Œå¦‚æœå‡ºç°443é”™è¯¯ï¼Œæ›¿æ¢æˆgitã€‚</p>
<p>ç„¶ååœ¨Blogç›®å½•ä¸‹</p>
<pre><code>hexo g -d
</code></pre><p>ç”Ÿæˆé™æ€æ–‡ä»¶å¹¶ä¸”éƒ¨ç½²å‡ºå»ï¼Œä¸å‡ºæ„å¤–ï¼Œå·²ç»å¯ä»¥å¤–ç½‘è®¿é—®äº†ã€‚</p>
<h1 id="ä¼˜åŒ–"><a href="#ä¼˜åŒ–" class="headerlink" title="ä¼˜åŒ–"></a>ä¼˜åŒ–</h1><h2 id="ä¸€ã€è®¿é—®é€Ÿåº¦"><a href="#ä¸€ã€è®¿é—®é€Ÿåº¦" class="headerlink" title="ä¸€ã€è®¿é—®é€Ÿåº¦"></a>ä¸€ã€è®¿é—®é€Ÿåº¦</h2><p>ç”±äºGoogleè¢«å¢™ï¼Œå¤§éƒ¨åˆ†ä¸»é¢˜ä¸­å¼•ç”¨çš„jqueryéƒ½ä¼šå› ä¸ºè¶…æ—¶ï¼ˆå¯ä»¥Blogç›®å½•ä¸‹æœç´¢googleï¼‰ï¼Œè€Œé€ æˆé¡µé¢è®¿é—®å¾ˆæ…¢ï¼Œè¿™é‡Œéœ€è¦å°†jqueryæ”¹ä¸ºç™¾åº¦çš„<br>â€‹    </p>
<pre><code>&lt;script src=&quot;//apps.bdimg.com/libs/jquery/2.0.3/jquery.min.js&quot;&gt;&lt;/script&gt;
</code></pre><h2 id="äºŒã€RSSè®¢é˜…"><a href="#äºŒã€RSSè®¢é˜…" class="headerlink" title="äºŒã€RSSè®¢é˜…"></a>äºŒã€RSSè®¢é˜…</h2><p>è¾“å…¥å‘½ä»¤</p>
<pre><code>$ npm install hexo-generator-feed --save
</code></pre><p>ç„¶ååœ¨_config.ymlä¸­ï¼Œæ·»åŠ <br>â€‹    </p>
<pre><code>rss: /atom.xml
feed:
     type: atom
    path: atom.xml
     limit: 20
</code></pre><h2 id="ä¸‰ã€æœç´¢æ”¯æŒ"><a href="#ä¸‰ã€æœç´¢æ”¯æŒ" class="headerlink" title="ä¸‰ã€æœç´¢æ”¯æŒ"></a>ä¸‰ã€æœç´¢æ”¯æŒ</h2><p>ç°åœ¨åœ¨ç™¾åº¦å’ŒGoogleæ˜¯æœä¸åˆ°ä½ çš„ç½‘ç«™çš„ï¼Œä¸ºäº†è®©æœç´¢å¼•æ“æœç´¢åˆ°ï¼Œéœ€è¦åšä¸€äº›å·¥ä½œã€‚</p>
<p>æœç´¢å¼•æ“å…¥å£</p>
<ul>
<li><a href="https://www.google.com/webmasters/tools/home?hl=zh-CN" target="_blank" rel="external">Googleæœç´¢å¼•æ“æäº¤å…¥å£</a></li>
<li><a href="http://www.baidu.com/search/url_submit.htm" target="_blank" rel="external">ç™¾åº¦æœç´¢å¼•æ“å…¥å£</a></li>
</ul>
<p>æ·»åŠ sitemap.xmlï¼š</p>
<p>é¦–å…ˆè¾“å…¥ï¼š</p>
<pre><code>npm install hexo-generator-sitemap --save
npm install hexo-generator-baidu-sitemap --save    
npm install hexo-baidu-url-submit --save
</code></pre><p>å‰ä¸¤ä¸ªæ’ä»¶ç”¨äºç”Ÿæˆsitemapï¼Œåä¸€ä¸ªæ’ä»¶ç”¨äºä¸»åŠ¨æ¨é€é“¾æ¥åˆ°ç™¾åº¦ï¼ˆ<strong>é˜²æ­¢ç™¾åº¦çˆ¬è™«æŠ“å–å¤±è´¥ï¼Œå¯¼è‡´ç™¾åº¦æœä¸åˆ°æ‚¨çš„åšå®¢</strong>ï¼Œè¿™é‡Œæœ‰ä¸€ç¯‡<a href="http://guochenglai.com/2016/09/26/baidu-crow-github-page/" target="_blank" rel="external">å…³äºç™¾åº¦æ— æ³•çˆ¬å–Github Pagesé™æ€ç½‘ç«™è§£å†³æ–¹æ¡ˆ</a>ï¼‰ã€‚</p>
<p>ç„¶ååœ¨<code>_config.yml</code>æ–‡ä»¶ä¸­æ·»åŠ </p>
<pre><code>sitemap:
         path: sitemap.xml
baidusitemap:
         path: baidusitemap.xml

## BaiduUrlSubmit: http://hui-wang.info/2016/10/23/Hexoæ’ä»¶ä¹‹ç™¾åº¦ä¸»åŠ¨æäº¤é“¾æ¥/    
baidu_url_submit:        ##ä¸»åŠ¨æ¨é€æ–°æ–‡ç« åˆ°ç™¾åº¦
  count: 3 ## æ¯”å¦‚3ï¼Œä»£è¡¨æäº¤æœ€æ–°çš„ä¸‰ä¸ªé“¾æ¥
  host: blog.darkangel7.com ## åœ¨ç™¾åº¦ç«™é•¿å¹³å°ä¸­æ³¨å†Œçš„åŸŸå
  token: your_token ## è¯·æ³¨æ„è¿™æ˜¯æ‚¨çš„ç§˜é’¥ï¼Œ è¯·ä¸è¦å‘å¸ƒåœ¨å…¬ä¼—ä»“åº“é‡Œ!
  path: baidu_urls.txt ## æ–‡æœ¬æ–‡æ¡£çš„åœ°å€ï¼Œ æ–°é“¾æ¥ä¼šä¿å­˜åœ¨æ­¤æ–‡æœ¬æ–‡æ¡£é‡Œ

##åŒæ—¶è¦æ£€æŸ¥è¿™é‡Œæœ‰æ²¡æœ‰URLå€¼ï¼Œå¿…é¡»åŒ…å«æ˜¯ç™¾åº¦ç«™é•¿å¹³å°æ³¨å†Œçš„åŸŸåï¼Œæ¯”å¦‚ 
# URL
url: http://blog.darkangel7.com
root: /
permalink: :year/:month/:day/:title/

##æœ€åï¼ŒåŠ å…¥æ–°çš„deployerï¼Œå¦‚
deploy:
- type: git
  repository: git@github.com:DarkAngel7/Blog-Hexo.git
- type: baidu_url_submitter  ## ç™¾åº¦é“¾æ¥ä¸»åŠ¨æ¨é€
</code></pre><p>å…ˆéªŒè¯ç½‘ç«™æ‰€æœ‰æƒï¼Œä¸‹è½½htmlï¼Œmvåˆ°Blog/themes/yourtheme/sourceç›®å½•ä¸‹ï¼Œæ‰§è¡Œ</p>
<pre><code>hexo g -d
</code></pre><p>éªŒè¯æˆåŠŸåï¼Œæ·»åŠ ç™¾åº¦è‡ªåŠ¨æ¨é€è„šæœ¬ï¼Œæœ€å¥½åœ¨<code>head.ejs</code>ä¸­æ·»åŠ ç™¾åº¦è‡ªåŠ¨æ¨é€çš„ä»£ç ï¼Œè‡³äº<code>head.ejs</code>æ–‡ä»¶ä½ç½®ï¼Œåœ¨ä½ ä½¿ç”¨çš„themeæ–‡ä»¶å¤¹ä¸‹æœç´¢å§ã€‚<br>è°·æ­Œçš„è¯ï¼Œåœ¨<code>æŠ“å–</code>-<code>ç«™ç‚¹åœ°å›¾</code>é‡Œé¢æ·»åŠ å°±å¥½ã€‚</p>
<p>è¿™æ ·ä¸»åŠ¨æ¨é€ä¸è‡ªåŠ¨æ¨é€ç»“åˆï¼Œèƒ½å¾ˆå¥½çš„æé«˜æ‚¨æ–‡ç« çš„æ›å…‰ç‡ã€‚    </p>
<h2 id="å››ã€è¯„è®ºåŠŸèƒ½"><a href="#å››ã€è¯„è®ºåŠŸèƒ½" class="headerlink" title="å››ã€è¯„è®ºåŠŸèƒ½"></a>å››ã€è¯„è®ºåŠŸèƒ½</h2><p>å¯ä»¥ä½¿ç”¨<a href="http://duoshuo.com" target="_blank" rel="external">å¤šè¯´</a>æ¥æä¾›è¯„è®ºåŠŸèƒ½ã€‚é¦–å…ˆï¼Œåœ¨<code>_config.yml</code>æ–‡ä»¶ä¸­æ·»åŠ </p>
<pre><code># Duoshuo
duoshuo_shortname: yoursite.doushuo.com
</code></pre><p>  ç„¶åï¼Œæœç´¢themesæ–‡ä»¶å¤¹ä¸‹ï¼Œä½ ä½¿ç”¨çš„themeæ–‡ä»¶ç›®å½•ä¸‹çš„<code>commemt.ejs</code>ï¼ˆä¸åŒçš„themeå¯èƒ½ä½ç½®ä¸åŒï¼Œè¯·è‡ªè¡Œå¯»æ‰¾ï¼‰ã€‚ä¿®æ”¹å¦‚ä¸‹ï¼š</p>
<pre><code> &lt;div id=&quot;comment&quot; class=&quot;comments-area&quot;&gt;
     &lt;% if(config.duoshuo_shortname) { %&gt;
     &lt;! -- å¤šè¯´çš„ä»£ç  --&gt; 
     &lt;% } %&gt; 
&lt;/div&gt;    

 å¦‚æœæŠ¥å…³äºdata-thread-keyçš„é”™è¯¯ï¼Œåˆ™æ”¹æˆä¸‹é¢è¿™æ ·ï¼š
 &lt;div class=&quot;ds-thread&quot; data-thread-key=&quot;&lt;%= page.path %&gt;&quot; data-title=&quot;&lt;%= page.title %&gt;&quot; data-url=&quot;&lt;%= page.permalink %&gt;&quot;&gt;&lt;/div    &gt;
</code></pre><h2 id="äº”ã€åˆ†äº«åŠŸèƒ½"><a href="#äº”ã€åˆ†äº«åŠŸèƒ½" class="headerlink" title="äº”ã€åˆ†äº«åŠŸèƒ½"></a>äº”ã€åˆ†äº«åŠŸèƒ½</h2><p>å¯ä»¥åœ¨Blogç›®å½•ä¸‹æœç´¢<code>post/share</code>ï¼Œä¸€èˆ¬åœ¨<code>article.ejs</code>æ–‡ä»¶ä¸­ï¼Œæˆ–è€…<code>post.ejs</code>æ–‡ä»¶ä¸­ï¼Œç„¶åæ›¿æ¢</p>
<pre><code>&lt;%- partial(&#39;post/author&#39;) %&gt;
</code></pre><p>ä¸º<a href="http://share.baidu.com/code" target="_blank" rel="external">ç™¾åº¦åˆ†äº«</a>æä¾›çš„ä»£ç ã€‚</p>
<h2 id="å…­ã€ä¸ªäººä¿¡æ¯å®Œå–„"><a href="#å…­ã€ä¸ªäººä¿¡æ¯å®Œå–„" class="headerlink" title="å…­ã€ä¸ªäººä¿¡æ¯å®Œå–„"></a>å…­ã€ä¸ªäººä¿¡æ¯å®Œå–„</h2><p>ç½‘ç«™çš„ä¿¡æ¯ä¸€èˆ¬éƒ½åœ¨<code>Blog/_config.yml</code>ä¸­ä¿®æ”¹ã€‚</p>
<p>å…³äºThemeï¼Œå»å®˜æ–¹æä¾›çš„<a href="https://github.com/tommy351/hexo/wiki/Themes" target="_blank" rel="external">ä¸»é¢˜åˆ—è¡¨</a>ä¸­é€‰ä¸ªç°æˆçš„ï¼ŒæŒ‰ç…§é‡Œé¢çš„æ–¹æ³•pullä¸‹æ¥ï¼Œå¦‚lightä¸»é¢˜</p>
<pre><code>$ git clone git://github.com/tommy351/hexo-theme-light.git themes/light
</code></pre><p>ç„¶ååœ¨<code>_config.yml</code>é…ç½®æ–‡ä»¶ä¸­è®¾ç½®ï¼š</p>
<pre><code>theme: light
</code></pre><p>å…³äºä¸»é¢˜çš„ä¼˜åŒ–ï¼Œä¸€èˆ¬åœ¨<code>themes/yourtheme/_config.yml</code>ä¸­é…ç½®ã€‚</p>
<h1 id="å†™æ–‡ç« "><a href="#å†™æ–‡ç« " class="headerlink" title="å†™æ–‡ç« "></a>å†™æ–‡ç« </h1><p>åœ¨Blogç›®å½•ä¸‹ï¼Œåˆ›å»º</p>
<pre><code>hexo new æ–‡ç« é¢˜ç›®
</code></pre><p>ç„¶åç”¨Markdownç¼–å†™ï¼Œå†™å¥½åsaveã€‚</p>
<pre><code>hexo g
hexo s
</code></pre><p>ç”Ÿæˆï¼Œç„¶ååœ¨æœ¬åœ°localhost:4000é¢„è§ˆä¸€ä¸‹ï¼Œå¦‚æœæ²¡æœ‰é—®é¢˜ï¼Œå°±å¯ä»¥å‘å¸ƒäº†ã€‚</p>
<pre><code>hexo d
</code></pre><p>æ‰€æœ‰çš„æ–‡ç« éƒ½æ˜¯æ”¾åœ¨<code>Blog/source/_posts/</code>ç›®å½•ä¸‹çš„ï¼Œå¯ä»¥éšæ—¶ç¼–è¾‘ä¿®æ”¹ã€‚</p>
<h1 id="å†™åœ¨æœ€å"><a href="#å†™åœ¨æœ€å" class="headerlink" title="å†™åœ¨æœ€å"></a>å†™åœ¨æœ€å</h1><p>è¿˜æœ‰ä¸€äº›å…¶ä»–çš„ä¿®æ”¹ï¼Œè¿™é‡Œå°±ä¸ä¸€ä¸€æäº†ï¼Œç­‰å¾…ä½ æ…¢æ…¢å‘ç°ã€‚ç°åœ¨å¿«å¼€å§‹å†™ä½œå§~~</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;å®‰è£…ï¼š&quot;&gt;&lt;a href=&quot;#å®‰è£…ï¼š&quot; class=&quot;headerlink&quot; title=&quot;å®‰è£…ï¼š&quot;&gt;&lt;/a&gt;å®‰è£…ï¼š&lt;/h1&gt;&lt;h2 id=&quot;ä¸€ã€å®‰è£…Homebrew&quot;&gt;&lt;a href=&quot;#ä¸€ã€å®‰è£…Homebrew&quot; class=&quot;headerlink&quot; titl
    
    </summary>
    
    
  </entry>
  
</feed>
